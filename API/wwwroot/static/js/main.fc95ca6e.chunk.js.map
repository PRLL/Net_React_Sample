{"version":3,"sources":["app/models/activity.ts","app/models/pagination.ts","app/api/agent.ts","app/models/profile.ts","app/stores/activityStore.ts","app/stores/profileStore.ts","app/stores/userStore.ts","app/stores/store.ts","app/stores/commonStore.ts","app/stores/modalStore.ts","app/stores/commentStore.ts","app/layout/NavBar.tsx","features/profiles/FollowButton.tsx","features/profiles/ProfileCard.tsx","features/activities/dashboard/ActivityListItemAttendee.tsx","features/activities/dashboard/ActivityListItem.tsx","features/activities/dashboard/ActivityList.tsx","features/activities/dashboard/ActivityFilters.tsx","features/activities/dashboard/ActivityListItemPlaceholder.tsx","features/activities/dashboard/ActivityDashboard.tsx","app/common/form/TextInput.tsx","features/users/LoginForm.tsx","features/errors/ValidationErrors.tsx","features/users/RegisterForm.tsx","features/home/HomePage.tsx","app/layout/LoadingComponent.tsx","app/common/form/TextArea.tsx","app/common/form/SelectInput.tsx","app/common/select_options/categoryOptions.ts","app/common/form/DateInput.tsx","features/activities/form/ActivityForm.tsx","features/activities/details/ActivityDetailedChat.tsx","features/activities/details/ActivityDetailedHeader.tsx","features/activities/details/ActivityDetailedInfo.tsx","features/activities/details/ActivityDetailedSidebar.tsx","features/activities/details/ActivityDetails.tsx","features/errors/TestError.tsx","features/errors/NotFound.tsx","features/errors/ServerError.tsx","app/common/modals/ModalContainer.tsx","features/profiles/ProfileEditForm.tsx","features/profiles/ProfileAbout.tsx","features/profiles/ProfileActivities.tsx","features/profiles/ProfileFollowings.tsx","app/common/image_upload/PhotoWidgetDropzone.tsx","app/common/image_upload/PhotoWidgetCropper.tsx","app/common/image_upload/PhotoUploadWidget.tsx","features/profiles/ProfilePhotos.tsx","features/profiles/ProfileBody.tsx","features/profiles/ProfileHeader.tsx","features/profiles/ProfilePage.tsx","app/layout/PrivateRoute.tsx","app/layout/App.tsx","app/layout/ScrollToTop.tsx","index.tsx"],"names":["Activity","init","Object","assign","this","ActivityFormValues","activity","id","undefined","title","category","description","date","city","venue","PaginatedResult","data","pagination","PagingParams","pageNumber","pageSize","axios","defaults","baseURL","process","interceptors","request","use","axiosRequestConfig","token","store","commonStore","headers","Authorization","response","a","JSON","parse","error","status","config","toast","method","errors","hasOwnProperty","history","push","modalStateErrors","key","flat","setServerError","Promise","reject","responseBody","requests","url","get","then","body","post","put","delete","agent","Activities","list","params","details","create","update","attend","Account","register","user","login","current","Profiles","username","listFollowings","predicate","listActivities","uploadPhoto","file","formData","FormData","append","setMainPhoto","profile","updateFollowing","deletePhoto","Profile","displayName","image","ActivityStore","activities","Map","selectedActivity","loading","loadingInitial","pagingParams","set","setActivity","userStore","isGoing","attendees","some","attendee","isHost","hostUsername","host","find","Date","deleteActivity","setSelectedActivity","setSelectedActivityAttendees","setSelectedActivityIsGoing","setSelectedActivityIsCancelled","isCancelled","setLoading","state","setLoadingInitial","setPagination","setPagingParams","setPredicate","value","forEach","detail","console","log","axiosParams","result","newActivity","runInAction","updatedActivity","filter","updateAttendeeFollowing","following","followersCount","cancel","makeAutoObservable","reaction","keys","clear","Array","from","values","sort","activityA","activityB","getTime","entries","activitiesByDate","reduce","format","URLSearchParams","toString","toISOString","ProfileStore","mainLoading","followingsLoading","uploading","followings","activeTab","profileActivities","loadingActivities","setProfile","setProfileFollowersCount","count","setProfileFollowingCount","followingCount","filterProfilePhoto","photoId","photos","p","setProfileFollowing","pushProfilePhoto","photo","setProfileMainPhoto","isMain","iPhoto","setMainLoading","setFollowingsLoading","setUploading","setFollowings","profiles","setActiveTab","setProfileActivities","setLoadingActivities","handleFollowingChange","load","loadFollowings","loadProfileActivities","setUserImage","setDisplayName","activityStore","UserStore","setUser","name","getUser","creds","setToken","modalStore","close","logout","window","localStorage","removeItem","getItem","appLoaded","setAppLoaded","setItem","modal","open","content","profileStore","commentStore","hubConnection","activityComments","setHubConnection","setActivityComments","activityComment","createdAt","unshiftActivityComments","unshift","createHubConnection","activityId","HubConnectionBuilder","withUrl","accessTokenFactory","withAutomaticReconnect","configureLogging","LogLevel","Information","build","start","catch","on","stopHubConnection","stop","clearComments","addComment","invoke","StoreContext","createContext","useStore","useContext","observer","Menu","inverted","fixed","Container","Item","as","NavLink","to","exact","header","src","alt","style","marginRight","Button","Link","positive","position","Image","avatar","spaced","Dropdown","pointing","text","icon","onClick","Reveal","animated","Content","visible","width","fluid","color","hidden","mouseEvent","syntheticEvent","preventDefault","Card","Header","Description","bio","length","substring","truncateBio","extra","Icon","followingStyle","borderColor","borderWidth","List","horizontal","map","Popup","hoverable","trigger","size","circular","bordered","ActivityListItem","Segment","Group","Label","attached","textAlign","marginBottom","basic","secondary","clearing","floated","groupedActivities","group","sub","ActivityFilters","vertical","marginTop","active","has","onChange","ActivityListItemPlaceholder","Placeholder","minHeight","Line","Paragraph","disabled","useState","loadingNext","setLoadingNext","useEffect","Grid","Column","pageStart","loadMore","currentPage","hasMore","totalPages","initialLoad","Loader","TextInput","props","useField","field","meta","Form","Field","touched","label","initialValues","email","password","onSubmit","setErrors","handleSubmit","isSubmitting","className","autoComplete","placeholder","type","render","ValidationErrors","Message","validationSchema","Yup","required","isValid","dirty","isLoggedIn","LoadingComponent","Dimmer","TextArea","SelectInput","helpers","Select","clearable","options","event","setValue","onBlur","setTouched","categoryOptions","DateInput","selected","useHistory","useParams","formActivity","enableReinitialize","uuid","handleFormSubmit","rows","placeholderText","showTimeSelect","timeCaption","dateFormat","border","resetForm","onKeyPress","keyboardEvent","shiftKey","Comment","comment","Avatar","Author","Metadata","formatDistanceToNow","Text","whiteSpace","activityImageStyle","activityImageTextStyle","bottom","left","height","padding","zIndex","top","ribbon","verticalAlign","relaxed","divided","Extra","TestErrors","widths","baseUrl","err","primary","NotFound","Inline","message","Modal","onClose","setEditMode","isProfileFromCurrentUser","editMode","Tab","Pane","panes","menuItem","pane","menu","onTabChange","e","tabProps","activeIndex","itemsPerRow","objectFit","Meta","PhotoWidgetDropzone","setFiles","dropzoneDefaultStyle","borderRadius","paddingTop","onDrop","useCallback","acceptedFiles","preview","URL","createObjectURL","useDropzone","getRootProps","getInputProps","isDragActive","PhotoWidgetCropper","setCropper","imagePreview","initialAspectRatio","aspectRatio","guides","viewMode","autoCropArea","background","onInitialized","cropper","PhotoUploadWidget","files","revokeObjectURL","overflow","getCroppedCanvas","toBlob","blob","target","setTarget","addPhotoMode","setAddPhotoMode","currentTarget","handleSetMainPhoto","handleDeletePhoto","menuPosition","Statistic","Divider","PrivateRoute","Component","component","routeProps","routeComponentProps","location","useLocation","finally","hideProgressBar","path","HomePage","ActivityDashboard","ActivityDetails","ActivityForm","ProfilePage","ServerError","ScrollToTop","pathname","scrollTo","createBrowserHistory","ReactDOM","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.fc95ca6e.chunk.js","sourcesContent":["import { Profile } from \"./profile\";\r\n\r\nexport interface Activity {\r\n    id: string;\r\n    title: string;\r\n    date: Date | null;\r\n    description: string;\r\n    category: string;\r\n    city: string;\r\n    venue: string;\r\n    hostUsername: string;\r\n    isCancelled: boolean;\r\n    isGoing: boolean;\r\n    isHost: boolean;\r\n    host?: Profile;\r\n    attendees: Profile[];\r\n}\r\n\r\nexport class Activity implements Activity {\r\n    constructor(init?: ActivityFormValues) {\r\n        Object.assign(this, init);\r\n    }\r\n}\r\n\r\nexport class ActivityFormValues {\r\n    id?: string = undefined;\r\n    title: string = '';\r\n    category: string = '';\r\n    description: string = '';\r\n    date: Date | null = null;\r\n    city: string = '';\r\n    venue: string = '';\r\n\r\n    constructor(activity?: ActivityFormValues) {\r\n        if (activity) {\r\n            this.id = activity.id;\r\n            this.title = activity.title;\r\n            this.category = activity.category;\r\n            this.description = activity.description;\r\n            this.date = activity.date;\r\n            this.venue = activity.venue;\r\n            this.city = activity.city;\r\n        }\r\n    }\r\n}","export interface Pagination {\r\n    currentPage: number;\r\n    itemsPerPage: number;\r\n    totalItems: number;\r\n    totalPages: number;\r\n}\r\n\r\nexport class PaginatedResult<T> {\r\n    data: T;\r\n    pagination: Pagination;\r\n\r\n    constructor(data: T, pagination: Pagination) {\r\n        this.data = data;\r\n        this.pagination = pagination;\r\n    }\r\n}\r\n\r\nexport class PagingParams {\r\n    pageNumber;\r\n    pageSize;\r\n\r\n    constructor(pageNumber = 1, pageSize = 2) {\r\n        this.pageNumber = pageNumber;\r\n        this.pageSize = pageSize;\r\n    }\r\n}","import axios, { AxiosError, AxiosResponse } from 'axios'\r\nimport { toast } from 'react-toastify';\r\nimport { history } from '../..';\r\nimport { Activity, ActivityFormValues } from '../models/activity';\r\nimport { PaginatedResult } from '../models/pagination';\r\nimport { Photo, Profile, ProfileActivity } from '../models/profile';\r\nimport { User, UserLogin } from '../models/user';\r\nimport { store } from '../stores/store';\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\r\n\r\naxios.interceptors.request.use(axiosRequestConfig => {\r\n    const token = store.commonStore.token;\r\n    if (token) axiosRequestConfig.headers.Authorization = `Bearer ${token}`;\r\n    return axiosRequestConfig;\r\n})\r\n\r\naxios.interceptors.response.use(async response => {\r\n    if (process.env.NODE_ENV === 'development') await sleep(1000);\r\n\r\n    const pagination = response.headers['pagination'];\r\n    if (pagination) {\r\n        response.data = new PaginatedResult(response.data, JSON.parse(pagination));\r\n        return response as AxiosResponse<PaginatedResult<any>>;\r\n    } else {\r\n        return response;\r\n    }\r\n}, (error: AxiosError) => {\r\n    const { data, status, config } = error.response!;\r\n    switch (status) {\r\n        case 400:\r\n            if (typeof data === 'string') {\r\n                toast.error(data);\r\n            } else if (config.method === 'get' && data.errors.hasOwnProperty('id')) {\r\n                history.push('not-found');\r\n            }\r\n            else if (data.errors) {\r\n                const modalStateErrors = [];\r\n                for (const key in data.errors) {\r\n                    // if (data.errors[key]) {\r\n                        modalStateErrors.push(data.errors[key])\r\n                    // }\r\n                }\r\n\r\n                throw modalStateErrors.flat();\r\n            }\r\n\r\n            break;\r\n        case 401:\r\n            toast.error('Unauthorized');\r\n            break;\r\n        case 404:\r\n            history.push('not-found');\r\n            break;\r\n        case 500:\r\n            store.commonStore.setServerError(data);\r\n            history.push('server-error');\r\n            break;\r\n    }\r\n    return Promise.reject(error);\r\n})\r\n\r\nconst responseBody = <T> (response: AxiosResponse<T>) => response.data;\r\n\r\nconst requests = {\r\n    get: <T> (url: string) => axios.get<T>(url).then(responseBody),\r\n    post: <T> (url: string, body: {}) => axios.post<T>(url, body).then(responseBody),\r\n    put: <T> (url: string, body: {}) => axios.put<T>(url, body).then(responseBody),\r\n    delete: <T> (url: string) => axios.delete<T>(url).then(responseBody),\r\n}\r\n\r\nconst Activities = {\r\n    list: (params: URLSearchParams) => axios.get<PaginatedResult<Activity[]>>('activities', { params }).then(responseBody),\r\n    details: (id: string) => requests.get<Activity>(`activities/${id}`),\r\n    create: (activity: ActivityFormValues) => requests.post<void>('activities', activity),\r\n    update: (activity: ActivityFormValues) => requests.put<void>(`activities/${activity.id}`, activity),\r\n    delete: (id: string) => requests.delete<void>(`activities/${id}`),\r\n    attend: (id: string) => requests.post<void>(`activities/${id}/attend`, {})\r\n}\r\n\r\nconst Account = {\r\n    register: (user: UserLogin) => requests.post<User>('account/register', user),\r\n    login: (user: UserLogin) => requests.post<User>('account/login', user),\r\n    current: () => requests.get<User>('account')\r\n}\r\n\r\nconst Profiles = {\r\n    details: (username: string) => requests.get<Profile>(`profiles/${username}`),\r\n    listFollowings: (username: string, predicate: string) =>\r\n        requests.get<Profile[]>(`follow/${username}?predicate=${predicate}`),\r\n    listActivities: (username: string, predicate: string) =>\r\n        requests.get<ProfileActivity[]>(`/profiles/${username}/activities?predicate=${predicate}`),\r\n    uploadPhoto: (file: Blob) => {\r\n        let formData = new FormData();\r\n        formData.append('File', file);\r\n\r\n        return axios.post<Photo>('photos', formData, {\r\n            headers: { 'Content-type': 'multipart/form-data' }\r\n        })\r\n    },\r\n    setMainPhoto: (id: string) => requests.post(`photos/${id}`, {}),\r\n    update: (profile: Partial<Profile>) => requests.put(`/profiles`, profile), // because only updating 2 properties of 'Profile' use Partial<>\r\n    updateFollowing: (username: string) => requests.post(`follow/${username}`, {}),\r\n    deletePhoto: (id: string) => requests.delete(`photos/${id}`)\r\n}\r\n\r\nconst agent = {\r\n    Activities,\r\n    Account,\r\n    Profiles\r\n}\r\n\r\nexport default agent;\r\n\r\nconst sleep = (delay: number) => {\r\n    return new Promise((resolve) => {\r\n        setTimeout(resolve, delay);\r\n    })\r\n}","import { User } from \"./user\";\r\n\r\nexport interface Profile {\r\n    username: string;\r\n    displayName: string;\r\n    image?: string;\r\n    bio?: string;\r\n    followersCount: number;\r\n    followingCount: number;\r\n    following: boolean;\r\n    photos?: Photo[];\r\n}\r\n\r\nexport class Profile implements Profile {\r\n    constructor(user: User) {\r\n        this.username = user.username;\r\n        this.displayName = user.displayName;\r\n        this.image = user.image;\r\n    }\r\n}\r\n\r\nexport interface Photo {\r\n    id: string;\r\n    url: string;\r\n    isMain: boolean;\r\n}\r\n\r\nexport interface ProfileActivity {\r\n    id: string;\r\n    title: string;\r\n    category: string;\r\n    date: Date;\r\n}","import { makeAutoObservable, reaction, runInAction } from \"mobx\";\r\nimport { Activity, ActivityFormValues } from \"../models/activity\";\r\nimport agent from \"../api/agent\";\r\nimport { format } from \"date-fns\";\r\nimport { store } from \"./store\";\r\nimport { Profile } from \"../models/profile\";\r\nimport { Pagination, PagingParams } from \"../models/pagination\";\r\n\r\nexport default class ActivityStore {\r\n    activities = new Map<string, Activity>();\r\n    selectedActivity: Activity | undefined = undefined;\r\n    loading = false;\r\n    loadingInitial = false;\r\n    pagination: Pagination | null = null;\r\n    pagingParams = new PagingParams();\r\n    predicate = new Map().set('all', true);\r\n\r\n    constructor() {\r\n        makeAutoObservable(this);\r\n\r\n        reaction(\r\n            () => this.predicate.keys(),\r\n            () => {\r\n                this.pagingParams = new PagingParams();\r\n                this.activities.clear();\r\n                this.list();\r\n            }\r\n        )\r\n    }\r\n\r\n    setActivity = (activity: Activity) => {\r\n        const user = store.userStore.user;\r\n        if (user) {\r\n            activity.isGoing = activity.attendees!.some(\r\n                attendee => attendee.username === user.username\r\n            )\r\n            activity.isHost = activity.hostUsername === user.username;\r\n            activity.host = activity.attendees?.find(attendee => attendee.username === activity.hostUsername)\r\n        }\r\n\r\n        activity.date = new Date(activity.date!)\r\n        this.activities.set(activity.id, activity);\r\n    }\r\n\r\n    deleteActivity = (id: string) => {\r\n        this.activities.delete(id);\r\n    }\r\n\r\n    setSelectedActivity = (activity: Activity | undefined) => {\r\n        this.selectedActivity = activity;\r\n    }\r\n\r\n    setSelectedActivityAttendees = (attendees: Profile[]) => {\r\n        this.selectedActivity!.attendees = attendees;\r\n    }\r\n\r\n    setSelectedActivityIsGoing = (isGoing: boolean) => {\r\n        this.selectedActivity!.isGoing = isGoing;\r\n    }\r\n\r\n    setSelectedActivityIsCancelled = (isCancelled: boolean) => {\r\n        this.selectedActivity!.isCancelled = isCancelled;\r\n    }\r\n\r\n    setLoading = (state: boolean) => {\r\n        this.loading = state;\r\n    }\r\n\r\n    setLoadingInitial = (state: boolean) => {\r\n        this.loadingInitial = state;\r\n    }\r\n\r\n    setPagination = (pagination: Pagination) => {\r\n        this.pagination = pagination;\r\n    }\r\n\r\n    setPagingParams = (pagingParams: PagingParams) => {\r\n        this.pagingParams = pagingParams;\r\n    }\r\n\r\n    setPredicate = (predicate: string, value: string | Date) => {\r\n        const resetPredicate = () => {\r\n            this.predicate.forEach((value, key) => {\r\n                if (key !== 'startDate') this.predicate.delete(key);\r\n            })\r\n        }\r\n\r\n        switch (predicate) {\r\n            case 'startDate':\r\n                this.predicate.delete(predicate);\r\n                this.predicate.set(predicate, value);\r\n                break;\r\n            default:\r\n                resetPredicate();\r\n                this.predicate.set(predicate, true);\r\n        }\r\n    }\r\n\r\n    get activitiesByDate() {\r\n        return Array.from(this.activities.values())\r\n            .sort((activityA, activityB) => activityA.date!.getTime() - activityB.date!.getTime());\r\n    }\r\n\r\n    get groupedActivities() {\r\n        return Object.entries(\r\n            this.activitiesByDate.reduce((activities, activity) => {\r\n                const date = format(activity.date!, 'dd MMM yyyy');//.toISOString().split('T')[0];\r\n                activities[date] = activities[date] ? [...activities[date], activity] : [activity];\r\n                return activities;\r\n            }, {} as {[key: string]: Activity[]})\r\n        )\r\n    }\r\n\r\n    get axiosParams() {\r\n        const params = new URLSearchParams();\r\n        params.append('pageNumber', this.pagingParams.pageNumber.toString());\r\n        params.append('pageSize', this.pagingParams.pageSize.toString());\r\n\r\n        this.predicate.forEach((value, key) => {\r\n            if (key === 'startDate') {\r\n                params.append(key, (value as Date).toISOString())\r\n            } else {\r\n                params.append(key, value);\r\n            }\r\n        })\r\n\r\n        return params;\r\n    }\r\n\r\n    detail = async (id: string) => {\r\n        let activity = this.activities.get(id);\r\n\r\n        if (activity) {\r\n            this.setSelectedActivity(activity);\r\n            return activity;\r\n        } else {\r\n            this.setLoadingInitial(true);\r\n\r\n            try {\r\n                activity = await agent.Activities.details(id);\r\n\r\n                this.setActivity(activity);\r\n                this.setSelectedActivity(activity);\r\n                this.setLoadingInitial(false);\r\n                return activity;\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n\r\n        this.setLoadingInitial(false);\r\n    }\r\n\r\n    list = async () => {\r\n        this.setLoadingInitial(true);\r\n\r\n        try {\r\n            const result = await agent.Activities.list(this.axiosParams);\r\n\r\n            result.data.forEach(activity => {\r\n                this.setActivity(activity);\r\n            })\r\n\r\n            this.setPagination(result.pagination);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n\r\n        this.setLoadingInitial(false);\r\n    }\r\n\r\n    create = async (activity: ActivityFormValues) => {\r\n        const user = store.userStore.user;\r\n        const attendee = new Profile(user!);\r\n\r\n        try {\r\n            await agent.Activities.create(activity);\r\n            const newActivity = new Activity(activity);\r\n            newActivity.hostUsername = user!.username;\r\n            newActivity.attendees = [attendee];\r\n            this.setActivity(newActivity);\r\n            this.setSelectedActivity(newActivity);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    update = async (activity: ActivityFormValues) => {\r\n        try {\r\n            await agent.Activities.update(activity);\r\n\r\n            runInAction(() => {\r\n                if (activity.id) {\r\n                    let updatedActivity = { ...this.detail(activity.id), ...activity }\r\n                    this.activities.set(activity.id, updatedActivity as unknown as Activity);\r\n                    this.setSelectedActivity(updatedActivity as unknown as Activity);\r\n                }\r\n            })\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    attend = async () => {\r\n        this.setLoading(true);\r\n        \r\n        const user = store.userStore.user;\r\n        try {\r\n            await agent.Activities.attend(this.selectedActivity!.id);\r\n            if (this.selectedActivity?.isGoing) {\r\n                this.setSelectedActivityAttendees(this.selectedActivity!.attendees?.filter(a => a.username !== user?.username)!);\r\n                this.setSelectedActivityIsGoing(false);\r\n            } else {\r\n                const attendee = new Profile(user!);\r\n                const attendees = this.selectedActivity?.attendees!;\r\n                attendees.push(attendee);\r\n                this.setSelectedActivityAttendees(attendees);\r\n                this.setSelectedActivityIsGoing(false);\r\n            }\r\n\r\n            this.setActivity(this.selectedActivity!);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n\r\n        this.setLoading(false);\r\n    }\r\n\r\n    updateAttendeeFollowing = (username: string) => {\r\n        this.activities.forEach(activity => {\r\n            activity.attendees.forEach(attendee => {\r\n                if (attendee.username === username) {\r\n                    attendee.following ? attendee.followersCount-- : attendee.followersCount++\r\n                    attendee.following = !attendee.following;\r\n                }\r\n            })\r\n        });\r\n    }\r\n\r\n    cancel = async () => {\r\n        this.loading = true;\r\n\r\n        try {\r\n            await agent.Activities.attend(this.selectedActivity!.id);\r\n\r\n            this.setSelectedActivityIsCancelled(!this.selectedActivity?.isCancelled);\r\n            this.setActivity(this.selectedActivity!);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n\r\n        this.setLoading(false);\r\n    }\r\n\r\n    delete = async (id: string) => {\r\n        this.loading = true;\r\n\r\n        try {\r\n            await agent.Activities.delete(id);\r\n\r\n            this.deleteActivity(id);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n\r\n        this.setLoading(false);\r\n    }\r\n}","import { makeAutoObservable, reaction } from \"mobx\";\r\nimport agent from \"../api/agent\";\r\nimport { Photo, Profile, ProfileActivity } from \"../models/profile\"\r\nimport { store } from \"./store\";\r\n\r\nexport default class ProfileStore {\r\n    profile: Profile | null = null;\r\n    loading = false;\r\n    mainLoading = false;\r\n    followingsLoading = false;\r\n    uploading = false;\r\n    followings: Profile[] = [];\r\n    activeTab = 0;;\r\n    profileActivities: ProfileActivity[] = [];\r\n    loadingActivities = false;\r\n\r\n    constructor() {\r\n        makeAutoObservable(this);\r\n\r\n        reaction(\r\n            () => this.activeTab,\r\n            activeTab => {\r\n                switch (activeTab) {\r\n                    case 3:\r\n                        this.loadFollowings('followers');\r\n                        break;\r\n                    case 4:\r\n                        this.loadFollowings('following');\r\n                        break;\r\n                    default:\r\n                        this.followings = [];\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    setProfile = (profile: Profile) => {\r\n        this.profile = profile;\r\n    }\r\n\r\n    setProfileFollowersCount = (count: number) => {\r\n        this.profile!.followersCount = count;\r\n    }\r\n\r\n    setProfileFollowingCount = (count: number) => {\r\n        this.profile!.followingCount = count;\r\n    }\r\n\r\n    filterProfilePhoto = (photoId: string) => {\r\n        if (this.profile) {\r\n            this.profile.photos = this.profile.photos?.filter(p => p.id !== photoId);\r\n        }\r\n    }\r\n\r\n    setProfileFollowing = (state: boolean) => {\r\n        this.profile!.following = state;\r\n    } \r\n\r\n    pushProfilePhoto = (photo: Photo) => {\r\n        this.profile?.photos?.push(photo);\r\n    }\r\n\r\n    setProfileMainPhoto = (photo: Photo) => {\r\n        if (this.profile && this.profile.photos) {\r\n            this.profile.photos.find(photo => photo.isMain)!.isMain = false;\r\n            this.profile.photos.find(iPhoto => iPhoto.id === photo.id)!.isMain = true;\r\n            this.profile.image = photo.url;\r\n        }\r\n    }\r\n\r\n    setLoading = (state: boolean) => {\r\n        this.loading = state;\r\n    }\r\n\r\n    setMainLoading = (state: boolean) => {\r\n        this.mainLoading = state;\r\n    }\r\n\r\n    setFollowingsLoading = (state: boolean) => {\r\n        this.followingsLoading = state;\r\n    }\r\n\r\n    setUploading = (state: boolean) => {\r\n        this.uploading = state;\r\n    }\r\n\r\n    setFollowings = (profiles: Profile[]) => {\r\n        this.followings = profiles;\r\n    }\r\n\r\n    setActiveTab = (activeTab: any) => {\r\n        this.activeTab = activeTab;\r\n    }\r\n\r\n    setProfileActivities = (profileActivities: ProfileActivity[]) => {\r\n        this.profileActivities = profileActivities;\r\n    }\r\n\r\n    setLoadingActivities = (state: boolean) => {\r\n        this.loadingActivities = state;\r\n    }\r\n\r\n    handleFollowingChange = (username: string) => {\r\n        this.followings.forEach(profile => {\r\n            if (profile.username === username) {\r\n                profile.following ? profile.followersCount-- : profile.followersCount++;\r\n                profile.following = !profile.following;\r\n            }\r\n        })\r\n    }\r\n\r\n    // this is called computed property\r\n    get isProfileFromCurrentUser() {\r\n        return store.userStore.user && this.profile\r\n            ? store.userStore.user.username === this.profile.username\r\n            : false;\r\n    }\r\n\r\n    load = async (username: string) => {\r\n        this.setLoading(true);\r\n\r\n        try {\r\n            this.setProfile(await agent.Profiles.details(username));\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n\r\n        this.setLoading(false);\r\n    }\r\n\r\n    loadFollowings = async (predicate: string) => {\r\n        this.setFollowingsLoading(true);\r\n\r\n        try {\r\n            console.log('3');\r\n            const followings = await agent.Profiles.listFollowings(this.profile!.username, predicate);\r\n            this.setFollowings(followings);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n\r\n        this.setFollowingsLoading(false);\r\n    }\r\n    \r\n    loadProfileActivities = async (username: string, predicate?: string) => {\r\n        this.setLoadingActivities(true);\r\n\r\n        try {\r\n            this.setProfileActivities(await agent.Profiles.listActivities(username, predicate!));\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n\r\n        this.setLoadingActivities(false);\r\n    }\r\n\r\n    uploadPhoto = async (file: Blob) => {\r\n        this.setUploading(true);\r\n\r\n        try {\r\n            const response = await agent.Profiles.uploadPhoto(file);\r\n            const photo = response.data;\r\n\r\n            if (this.profile) {\r\n                this.pushProfilePhoto(photo);\r\n\r\n                if (photo.isMain && store.userStore.user) {\r\n                    store.userStore.setUserImage(photo.url);\r\n                    this.profile.image = photo.url;\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n\r\n        this.setUploading(false);\r\n    }\r\n\r\n    setMainPhoto = async (photo: Photo) => {\r\n        this.setMainLoading(true);\r\n\r\n        try {\r\n            await agent.Profiles.setMainPhoto(photo.id);\r\n\r\n            store.userStore.setUserImage(photo.url);\r\n\r\n            if (this.profile && this.profile.photos) {\r\n                this.setProfileMainPhoto(photo);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n\r\n        this.setMainLoading(false);\r\n    }\r\n\r\n    update = async (profile: Partial<Profile>) => {\r\n        this.setMainLoading(true);\r\n\r\n        try {\r\n            await agent.Profiles.update(profile);\r\n\r\n            if (profile.displayName && profile.displayName !== store.userStore.user?.displayName) {\r\n                store.userStore.setDisplayName(profile.displayName);\r\n            }\r\n\r\n            this.setProfile({ ...this.profile, ...profile as Profile });\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n\r\n        this.setMainLoading(false);\r\n    }\r\n\r\n    updateFollowing = async (username: string, following: boolean) => {\r\n        this.setMainLoading(true);\r\n\r\n        try {\r\n            await agent.Profiles.updateFollowing(username);\r\n\r\n            store.activityStore.updateAttendeeFollowing(username);\r\n\r\n            if (this.profile) {\r\n                if (this.profile.username === store.userStore.user?.username) {\r\n                    this.setProfileFollowingCount(\r\n                        following\r\n                            ? this.profile.followingCount + 1\r\n                            : this.profile.followingCount - 1);\r\n                } else if (this.profile.username === username) {\r\n                    this.setProfileFollowersCount(\r\n                        following\r\n                            ? this.profile.followersCount + 1\r\n                            : this.profile.followersCount - 1);\r\n                    this.setProfileFollowing(!this.profile.following);\r\n                }\r\n            }\r\n\r\n            this.handleFollowingChange(username);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n\r\n        this.setMainLoading(false);\r\n    }\r\n\r\n    deletePhoto = async (photo: Photo) => {\r\n        this.setMainLoading(true);\r\n\r\n        try {\r\n            await agent.Profiles.deletePhoto(photo.id);\r\n\r\n            this.filterProfilePhoto(photo.id);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n\r\n        this.setMainLoading(false);\r\n    }\r\n}","import { makeAutoObservable } from \"mobx\";\r\nimport { history } from \"../..\";\r\nimport agent from \"../api/agent\";\r\nimport { User, UserLogin } from \"../models/user\";\r\nimport { store } from \"./store\";\r\n\r\nexport default class UserStore {\r\n    user: User | null = null;\r\n\r\n    constructor() {\r\n        makeAutoObservable(this)\r\n    }\r\n\r\n    setUser = (user: User) => {\r\n        this.user = user;\r\n    }\r\n\r\n    setUserImage = (image: string) => {\r\n        if (this.user) this.user.image = image;\r\n    }\r\n\r\n    setDisplayName = (name: string) => {\r\n        if (this.user) this.user.displayName = name;\r\n    }\r\n\r\n    getUser = async () => {\r\n        try {\r\n            const user = await agent.Account.current();\r\n            this.setUser(user);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    get isLoggedIn() {\r\n        return !!this.user;\r\n    }\r\n\r\n    register = async (creds: UserLogin) => {\r\n        try {\r\n            const user = await agent.Account.register(creds);\r\n            store.commonStore.setToken(user.token);\r\n            this.setUser(user);\r\n            history.push('/activities');\r\n            store.modalStore.close();\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    login = async (creds: UserLogin) => {\r\n        try {\r\n            const user = await agent.Account.login(creds);\r\n            store.commonStore.setToken(user.token);\r\n            this.setUser(user);\r\n            history.push('/activities');\r\n            store.modalStore.close();\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    logout = () => {\r\n        store.commonStore.setToken(null);\r\n        window.localStorage.removeItem('jwt');\r\n        this.user = null;\r\n        history.push('/');\r\n    }\r\n}","import { createContext, useContext } from \"react\";\r\nimport ActivityStore from \"./activityStore\";\r\nimport CommentStore from \"./commentStore\";\r\nimport CommonStore from \"./commonStore\";\r\nimport ModalStore from \"./modalStore\";\r\nimport ProfileStore from \"./profileStore\";\r\nimport UserStore from \"./userStore\";\r\n\r\ninterface Store {\r\n    commonStore: CommonStore;\r\n    activityStore: ActivityStore;\r\n    userStore: UserStore;\r\n    modalStore: ModalStore;\r\n    profileStore: ProfileStore;\r\n    commentStore: CommentStore;\r\n}\r\n\r\nexport const store: Store = {\r\n    activityStore: new ActivityStore(),\r\n    commonStore: new CommonStore(),\r\n    userStore: new UserStore(),\r\n    modalStore: new ModalStore(),\r\n    profileStore: new ProfileStore(),\r\n    commentStore: new CommentStore()\r\n}\r\n\r\nexport const StoreContext = createContext(store);\r\n\r\nexport function useStore() {\r\n    return useContext(StoreContext);\r\n}","import { makeAutoObservable, reaction } from \"mobx\";\r\nimport { ServerError } from \"../models/serverError\";\r\n\r\nexport default class CommonStore {\r\n    error: ServerError | null = null;\r\n    token: string | null = window.localStorage.getItem('jwt');\r\n    appLoaded = false;\r\n\r\n    constructor() {\r\n        makeAutoObservable(this);\r\n\r\n        reaction(\r\n            () => this.token,\r\n            token => {\r\n                if (token) {\r\n                    window.localStorage.setItem('jwt', token)\r\n                } else {\r\n                    window.localStorage.removeItem('jwt')\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    setServerError = (error: ServerError) => {\r\n        this.error = error;\r\n    }\r\n\r\n    setToken = (token: string | null) => {\r\n        this.token = token;\r\n    }\r\n\r\n    setAppLoaded = () => {\r\n        this.appLoaded = true;\r\n    }\r\n}","import { makeAutoObservable } from \"mobx\"\r\n\r\ninterface Modal {\r\n    open: boolean;\r\n    body: JSX.Element | null;\r\n}\r\n\r\nexport default class ModalStore {\r\n    modal: Modal = {\r\n        open: false,\r\n        body: null\r\n    }\r\n\r\n    constructor() {\r\n        makeAutoObservable(this);\r\n    }\r\n\r\n    open = (content: JSX.Element) => {\r\n        this.modal.open = true;\r\n        this.modal.body = content;\r\n    }\r\n\r\n    close = () => {\r\n        this.modal.open = false;\r\n        this.modal.body = null;\r\n    }\r\n}","import { HubConnection, HubConnectionBuilder, LogLevel } from \"@microsoft/signalr\";\r\nimport { makeAutoObservable } from \"mobx\";\r\nimport { ActivityComment } from \"../models/comment\";\r\nimport { store } from \"./store\";\r\n\r\nexport default class CommentStore {\r\n    hubConnection: HubConnection | null = null;\r\n    activityComments: ActivityComment[] = [];\r\n\r\n    constructor() {\r\n        makeAutoObservable(this);\r\n    }\r\n\r\n    setHubConnection = (hubConnection: HubConnection) => {\r\n        this.hubConnection = hubConnection;\r\n    }\r\n\r\n    setActivityComments = (activityComments: ActivityComment[]) => {\r\n        activityComments.forEach(activityComment => {\r\n            activityComment.createdAt = new Date(activityComment.createdAt + 'Z');\r\n        })\r\n\r\n        this.activityComments = activityComments;\r\n    }\r\n\r\n    unshiftActivityComments = (activityComment: ActivityComment) => {\r\n        activityComment.createdAt = new Date(activityComment.createdAt);\r\n        this.activityComments.unshift(activityComment);\r\n    }\r\n\r\n    createHubConnection = (activityId: string) => {\r\n        if (store.activityStore.selectedActivity) {\r\n            this.hubConnection = new HubConnectionBuilder().withUrl(process.env.REACT_APP_CHAT_URL + '?activityId=' + activityId, {\r\n                accessTokenFactory: () => store.userStore.user?.token!\r\n            })\r\n            .withAutomaticReconnect()\r\n            .configureLogging(LogLevel.Information)\r\n            .build();\r\n\r\n            this.hubConnection.start().catch(error => console.log('Error establishing connection to comments...', error))\r\n\r\n            this.hubConnection.on('LoadComments', (activityComments: ActivityComment[]) => {\r\n                this.setActivityComments(activityComments);\r\n            })\r\n\r\n            this.hubConnection.on('ReceiveComment', (activityComment: ActivityComment) => {\r\n                this.unshiftActivityComments(activityComment);\r\n            })\r\n        }\r\n    }\r\n\r\n    stopHubConnection = () => {\r\n        this.hubConnection?.stop().catch(error => console.log('Error trying to stop comment connection...', error));\r\n    }\r\n\r\n    clearComments = () => {\r\n        this.setActivityComments([]);\r\n        this.stopHubConnection();\r\n    }\r\n\r\n    addComment = async (values: any) => {\r\n        values.activityId = store.activityStore.selectedActivity?.id;\r\n\r\n        try{\r\n            await this.hubConnection?.invoke('SendComment', values);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n}","import { observer } from 'mobx-react-lite';\r\nimport { Link, NavLink } from 'react-router-dom';\r\nimport { Button, Container, Dropdown, Image, Menu } from 'semantic-ui-react';\r\nimport { useStore } from '../stores/store';\r\n\r\nexport default observer(function NavBar() {\r\n    const { userStore: { user, logout } } = useStore();\r\n\r\n    return (\r\n        <Menu inverted fixed='top'>\r\n            <Container>\r\n                <Menu.Item as={ NavLink } to='/' exact header>\r\n                    <img src='/assets/logo.png' alt=\"logo\" style={{ marginRight: '10px' }} />\r\n                    HOME\r\n                </Menu.Item>\r\n                <Menu.Item name='Activities' as={ NavLink } to='/activities' />\r\n                <Menu.Item>\r\n                    <Button\r\n                        as={ Link } to='/createActivity'\r\n                        positive content='Create Activity'\r\n                    />\r\n                </Menu.Item>\r\n                <Menu.Item name='Error Validation Test' as={ NavLink } to='/errors' />\r\n                <Menu.Item position='right'>\r\n                    <Image src={ user?.image || '/assets/user.png' } avatar spaced='right'/>\r\n                    <Dropdown pointing='top left' text={ user?.displayName }>\r\n                        <Dropdown.Menu>\r\n                            <Dropdown.Item as={ Link } to={ `/profiles/${user?.username}` } text='My Profile' icon='user'/>\r\n                            <Dropdown.Item onClick={ logout } text='Logout' icon='power'/>\r\n                        </Dropdown.Menu>\r\n                    </Dropdown>\r\n                </Menu.Item>\r\n            </Container>\r\n        </Menu>\r\n    )\r\n})","import { observer } from \"mobx-react-lite\";\r\nimport { SyntheticEvent } from \"react\";\r\nimport { Button, Reveal } from \"semantic-ui-react\";\r\nimport { Profile } from \"../../app/models/profile\";\r\nimport { useStore } from \"../../app/stores/store\";\r\n\r\ninterface Props {\r\n    profile: Profile;\r\n}\r\n\r\nexport default observer(function FollowButton({ profile }: Props) {\r\n    const { profileStore, userStore } = useStore();\r\n\r\n    if (userStore.user?.username === profile.username) return null;\r\n\r\n    function handleFollow(syntheticEvent: SyntheticEvent, username: string) {\r\n        syntheticEvent.preventDefault();\r\n        profile.following\r\n            ? profileStore.updateFollowing(username, false)\r\n            : profileStore.updateFollowing(username, true);\r\n    }\r\n\r\n    return (\r\n        <Reveal animated='move'>\r\n            <Reveal.Content visible style={ {width: '100%'} }>\r\n                {console.log(profile)}\r\n                <Button\r\n                    fluid color='teal'\r\n                    content={ (profile.following ? '' : 'Not ') + 'Following' }\r\n                />\r\n            </Reveal.Content>\r\n            <Reveal.Content hidden style={ {width: '100%'} }>\r\n                <Button\r\n                    fluid\r\n                    color={ profile.following ? 'red' : 'green' }\r\n                    content={ profile.following ? 'Unfollow' : 'Follow' }\r\n                    loading={ profileStore.mainLoading }\r\n                    onClick={ (mouseEvent) => handleFollow(mouseEvent, profile.username) }\r\n                />\r\n            </Reveal.Content>\r\n        </Reveal>\r\n    )\r\n\r\n})","import { observer } from \"mobx-react-lite\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Card, Icon, Image } from \"semantic-ui-react\";\r\nimport { Profile } from \"../../app/models/profile\";\r\nimport FollowButton from \"./FollowButton\";\r\n\r\ninterface Props {\r\n    profile: Profile;\r\n}\r\n\r\nexport default observer(function ProfileCard({ profile } : Props) {\r\n    function truncateBio(bio: string | undefined) {\r\n        if (bio) {\r\n            return bio.length > 40\r\n                ? bio.substring(0, 37) + '...'\r\n                : bio;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Card as={ Link } to={ `/profiles/${profile.username}` }>\r\n            <Image src={ profile.image || '/assets/user.png'} />\r\n            <Card.Content>\r\n                <Card.Header>{ profile.displayName }</Card.Header>\r\n                <Card.Description>{ truncateBio(profile.bio) }</Card.Description>\r\n            </Card.Content>\r\n            <Card.Content extra>\r\n                <Icon name='user' />\r\n                { profile.followersCount } follower{ profile.followersCount === 1 ? '' : 's' }\r\n            </Card.Content>\r\n            <FollowButton profile={ profile } />\r\n        </Card>\r\n    )\r\n})","import { observer } from \"mobx-react-lite\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { List, Image, Popup } from \"semantic-ui-react\";\r\nimport { Profile } from \"../../../app/models/profile\";\r\nimport ProfileCard from \"../../profiles/ProfileCard\";\r\n\r\ninterface Props {\r\n    attendees: Profile[];\r\n}\r\n\r\nexport default observer(function ActivityListItemAttendee({ attendees } : Props) {\r\n    const followingStyle = {\r\n        borderColor: 'green',\r\n        borderWidth: 3\r\n    }\r\n\r\n    return (\r\n        <List horizontal>\r\n            {\r\n                attendees.map(attendee => (\r\n                    <Popup hoverable key={ attendee.username } trigger={\r\n                        <List.Item key={ attendee.username } as={ Link } to={ `/profiles/${attendee.username}` }>\r\n                            <Image\r\n                                size='mini' circular bordered\r\n                                src={ attendee.image || '/assets/user.png' }\r\n                                style={ attendee.following ? followingStyle : null }\r\n                            />\r\n                        </List.Item> }\r\n                    >\r\n                        <Popup.Content>\r\n                            <ProfileCard profile={ attendee } />\r\n                        </Popup.Content>\r\n                    </Popup>))\r\n            }\r\n        </List>\r\n    )\r\n})","import { Link } from \"react-router-dom\";\r\nimport { Button, Icon, Item, Label, Segment } from \"semantic-ui-react\";\r\nimport { Activity } from \"../../../app/models/activity\";\r\nimport { format } from \"date-fns\";\r\nimport ActivityListItemAttendee from \"./ActivityListItemAttendee\";\r\n\r\ninterface Props {\r\n    activity: Activity\r\n}\r\n\r\nexport default function ActivityListItem({ activity } : Props) {\r\n    return (\r\n        <Segment.Group>\r\n            <Segment>\r\n                { activity.isCancelled && (\r\n                    <Label attached='top' color='red' content='Cancelled' style={ {textAlign: 'center'} } />\r\n                ) }\r\n                <Item.Group>\r\n                    <Item>\r\n                        <Item.Image style={ {marginBottom: 3} }size='tiny' circular src={ activity.host?.image || '/assets/user.png' } />\r\n                        <Item.Content>\r\n                            <Item.Header as={ Link } to={ `/activities/${activity.id}` }>{ activity.title }</Item.Header>\r\n                            <Item.Description>Hosted by <Link to={ `profiles/${activity.hostUsername}` }>{ activity.host?.displayName }</Link></Item.Description>\r\n                            {\r\n                                activity.isHost\r\n                                ? (<Item.Description>\r\n                                        <Label basic color='orange'>\r\n                                            You are the host of this activity\r\n                                        </Label>\r\n                                    </Item.Description>)\r\n                                : activity.isGoing && (\r\n                                    <Item.Description>\r\n                                        <Label basic color='green'>\r\n                                            You are going to this activity\r\n                                        </Label>\r\n                                    </Item.Description>)\r\n                            }\r\n                        </Item.Content>\r\n                    </Item>\r\n                </Item.Group>\r\n            </Segment>\r\n            <Segment>\r\n                <span>\r\n                    <Icon name='clock' />{ format(activity.date!, 'dd MMM yyyy h:mm aa') }\r\n                    <Icon name='marker' />{ activity.venue }\r\n                </span>\r\n            </Segment>\r\n            <Segment secondary>\r\n                <ActivityListItemAttendee attendees={ activity.attendees! } />\r\n            </Segment>\r\n            <Segment clearing>\r\n                <span>{ activity.description }</span>\r\n                <Button\r\n                    as={ Link } to={ `/activities/${activity.id}` }\r\n                    floated='right' content='View' color='teal'\r\n                />\r\n            </Segment>\r\n        </Segment.Group>\r\n    )\r\n}","import { observer } from 'mobx-react-lite';\r\nimport { Fragment } from 'react';\r\nimport { Header } from 'semantic-ui-react';\r\nimport { useStore } from '../../../app/stores/store';\r\nimport ActivityListItem from './ActivityListItem';\r\n\r\nexport default observer(function ActivityList() {\r\n    const { activityStore } = useStore();\r\n\r\n    return (\r\n        <>\r\n            { activityStore.groupedActivities.map(([group, activities]) => (\r\n                <Fragment key={ group }>\r\n                    <Header sub color='teal'>\r\n                        { group }\r\n                    </Header>\r\n                    { activities.map(activity => (\r\n                        <ActivityListItem key={ activity.id } activity={ activity } />\r\n                    )) }\r\n                </Fragment>\r\n            )) }\r\n        </>\r\n    )\r\n})","import Calendar from \"react-calendar\";\r\nimport { Header, Menu } from \"semantic-ui-react\";\r\nimport { useStore } from \"../../../app/stores/store\";\r\n\r\nexport default function ActivityFilters() {\r\n    const { activityStore: { predicate, setPredicate } } = useStore();\r\n\r\n    return (\r\n        <>\r\n            <Menu vertical size='large' style={{ width: '100%', marginTop: 25 }}>\r\n                <Header icon='filter' attached color='teal' content='Filters' />\r\n                <Menu.Item \r\n                    content='All Activities'\r\n                    active={ predicate.has('all') }\r\n                    onClick={ () => setPredicate('all', 'true') }\r\n                />\r\n                <Menu.Item\r\n                    content=\"You're going\"\r\n                    active={ predicate.has('isGoing') }\r\n                    onClick={ () => setPredicate('isGoing', 'true') }\r\n                />\r\n                <Menu.Item\r\n                    content=\"You're hosting\"\r\n                    active={ predicate.has('isHost') }\r\n                    onClick={ () => setPredicate('isHost', 'true') }\r\n                />\r\n            </Menu>\r\n            <Header />\r\n            <Calendar\r\n                onChange={ (date) => setPredicate('startDate', date as Date) }\r\n                value={ predicate.get('startDate') || new Date() }\r\n            />\r\n        </>\r\n    )\r\n}","import { Fragment } from 'react';\r\nimport { Segment, Button, Placeholder } from 'semantic-ui-react';\r\n\r\nexport default function ActivityListItemPlaceholder() {\r\n    return (\r\n        <Fragment>\r\n            <Placeholder fluid style={ {marginTop: 25} }>\r\n                <Segment.Group>\r\n                    <Segment style={ {minHeight: 110} }>\r\n                        <Placeholder>\r\n                            <Placeholder.Header image>\r\n                                <Placeholder.Line />\r\n                                <Placeholder.Line />\r\n                            </Placeholder.Header>\r\n                            <Placeholder.Paragraph>\r\n                                <Placeholder.Line />\r\n                            </Placeholder.Paragraph>\r\n                        </Placeholder>\r\n                    </Segment>\r\n                    <Segment>\r\n                        <Placeholder>\r\n                            <Placeholder.Line />\r\n                            <Placeholder.Line />\r\n                        </Placeholder>\r\n                    </Segment>\r\n                    <Segment secondary style={ {minHeight: 70} } />\r\n                    <Segment clearing>\r\n                        <Button disabled color='blue' floated='right' content='View' />\r\n                    </Segment>\r\n                </Segment.Group>\r\n            </Placeholder>\r\n        </Fragment>\r\n    );\r\n};","\r\nimport { useEffect, useState } from 'react';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { Grid, Loader } from 'semantic-ui-react';\r\nimport { useStore } from '../../../app/stores/store';\r\nimport ActivityList from './ActivityList';\r\nimport ActivityFilters from './ActivityFilters';\r\nimport { PagingParams } from '../../../app/models/pagination';\r\nimport InfiniteScroll from 'react-infinite-scroller';\r\nimport ActivityListItemPlaceholder from './ActivityListItemPlaceholder';\r\n\r\nexport default observer(function ActivityDashboard() {\r\n    const { activityStore } = useStore();\r\n    const { pagination } = activityStore;\r\n\r\n    const [loadingNext, setLoadingNext] = useState(false);\r\n\r\n    function handleGetNext() {\r\n        setLoadingNext(true);\r\n        activityStore.setPagingParams(new PagingParams(pagination!.currentPage + 1))\r\n        activityStore.list().then(() => setLoadingNext(false));\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (activityStore.activities.size <= 1) activityStore.list();\r\n      activityStore.list();\r\n    }, [activityStore])\r\n\r\n    // if (activityStore.loadingInitial && !loadingNext) return <LoadingComponent content='Fetching Activities...' />\r\n\r\n    return (\r\n        <Grid>\r\n            {/* {console.log(\"total \" + pagination?.totalPages + \" current \" + pagination?.currentPage)} */}\r\n            <Grid.Column width='10'>\r\n                {\r\n                    activityStore.loadingInitial && !loadingNext\r\n                        ? (\r\n                            <>\r\n                                <ActivityListItemPlaceholder />\r\n                                <ActivityListItemPlaceholder />\r\n                            </>\r\n                        )\r\n                        : (\r\n                            <InfiniteScroll\r\n                                pageStart={ 1 }\r\n                                loadMore={ handleGetNext }\r\n                                hasMore={ !loadingNext && !!pagination && pagination.currentPage < pagination.totalPages }\r\n                                initialLoad={ false }\r\n                            >\r\n                                <ActivityList />\r\n                            </InfiniteScroll>\r\n                        )\r\n                }\r\n            </Grid.Column>\r\n            <Grid.Column width='6'>\r\n                <ActivityFilters />\r\n            </Grid.Column>\r\n            <Grid.Column width='10'>\r\n                <Loader active={ loadingNext } />\r\n            </Grid.Column>\r\n        </Grid>\r\n    )\r\n})","import { useField } from \"formik\";\r\nimport { Form, Label } from \"semantic-ui-react\";\r\n\r\ninterface Props {\r\n    placeholder: string;\r\n    name: string;\r\n    type?: string;\r\n    label?: string;\r\n}\r\n\r\nexport default function TextInput(props: Props) {\r\n    const [field, meta] = useField(props.name);\r\n\r\n    return (\r\n        <Form.Field error={ meta.touched && !!meta.error }>\r\n            <label>{ props.label }</label>\r\n            <input { ...field} { ...props } />\r\n            {\r\n                meta.touched && meta.error\r\n                ? (<Label basic color='red'>{ meta.error }</Label>)\r\n                : null\r\n            }\r\n        </Form.Field>\r\n    )\r\n}","import { ErrorMessage, Form, Formik } from \"formik\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { Button, Header, Label } from \"semantic-ui-react\";\r\nimport TextInput from \"../../app/common/form/TextInput\";\r\nimport { useStore } from \"../../app/stores/store\";\r\n\r\nexport default observer(function LoginForm() {\r\n    const { userStore } = useStore();\r\n\r\n    return (\r\n        <Formik initialValues={ {email: '', password: '', error: null} } onSubmit={ (values, { setErrors }) => userStore.login(values).catch(error => setErrors({ error: 'Invalid credentials' })) }>\r\n            { ({ handleSubmit, isSubmitting, errors }) => (\r\n                <Form className='ui form' onSubmit={ handleSubmit } autoComplete='off'>\r\n                    <Header as='h2' content='Login' color='teal' textAlign='center' />\r\n                    <TextInput name='email' placeholder='Email' />\r\n                    <TextInput name='password' placeholder='Password' type='password' />\r\n                    <ErrorMessage name='error' render={ () => <Label style={ {marginBottom: 10} } basic color='red' content={ errors.error }/> }/>\r\n                    <Button loading={ isSubmitting } positive content='Login' type='submit' fluid />\r\n                </Form>\r\n            )}\r\n        </Formik>\r\n    )\r\n})","import { Message } from \"semantic-ui-react\";\r\n\r\ninterface Props {\r\n    // errors: string[] | null;\r\n    errors: any;\r\n}\r\n\r\nexport default function ValidationErrors({ errors }: Props) {\r\n    return (\r\n        <Message error>\r\n            { errors && (\r\n                <Message.List>\r\n                    {/* { errors.map((error: any, key) => ( */}\r\n                    { errors.map((error: any, key: any) => (\r\n                        <Message.Item key={ key }>{ error }</Message.Item>\r\n                    ))}\r\n                </Message.List>\r\n            )}\r\n        </Message>\r\n    )\r\n}","import { ErrorMessage, Form, Formik } from \"formik\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { Button, Header } from \"semantic-ui-react\";\r\nimport TextInput from \"../../app/common/form/TextInput\";\r\nimport { useStore } from \"../../app/stores/store\";\r\nimport * as Yup from 'yup';\r\nimport ValidationErrors from \"../errors/ValidationErrors\";\r\n\r\nexport default observer(function RegisterForm() {\r\n    const { userStore } = useStore();\r\n\r\n    return (\r\n        <Formik initialValues={ {displayName: '', username: '', email: '', password: '', error: null} } \r\n            onSubmit={ (values, { setErrors }) => userStore.register(values).catch(error => setErrors({ error })) }\r\n            validationSchema={ Yup.object({\r\n                displayName: Yup.string().required(),\r\n                username: Yup.string().required(),\r\n                email: Yup.string().required().email(),\r\n                password: Yup.string().required()\r\n            }) }\r\n        >\r\n            { ({ handleSubmit, isSubmitting, errors, isValid, dirty }) => (\r\n                <Form className='ui form error' onSubmit={ handleSubmit } autoComplete='off'>\r\n                    <Header as='h2' content='Sign up' color='teal' textAlign='center' />\r\n                    <TextInput name='displayName' placeholder='Display Name' />\r\n                    <TextInput name='username' placeholder='User Name' />\r\n                    <TextInput name='email' placeholder='Email' />\r\n                    <TextInput name='password' placeholder='Password' type='password' />\r\n                    <ErrorMessage name='error' render={ () => <ValidationErrors errors={ errors.error } /> }/>\r\n                    <Button disabled={ !isValid || !dirty || isSubmitting }\r\n                        loading={ isSubmitting } \r\n                        positive content='Register' type='submit' fluid\r\n                    />\r\n                </Form>\r\n            )}\r\n        </Formik>\r\n    )\r\n})","import { observer } from 'mobx-react-lite';\r\nimport { Link } from 'react-router-dom';\r\nimport { Container, Header, Segment, Image, Button } from 'semantic-ui-react';\r\nimport { useStore } from '../../app/stores/store';\r\nimport LoginForm from '../users/LoginForm';\r\nimport RegisterForm from '../users/RegisterForm';\r\n\r\nexport default observer(function HomePage() {\r\n    const { userStore, modalStore } = useStore();\r\n\r\n    return (\r\n        <Segment inverted textAlign='center' vertical className='masthead'>\r\n            <Container text>\r\n                <Header as='h1' inverted>\r\n                    <Image size='massive' src='/assets/logo.png' alt='logo' style={{ marginBottom: 12 }} />\r\n                </Header>\r\n                { userStore.isLoggedIn \r\n                    ? (\r\n                        <>\r\n                            <Header as='h2' inverted content='Welcome to Reactivities' />\r\n                            <Button as={ Link } to='/activities' size='huge' inverted>\r\n                                Access Sample App\r\n                            </Button>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <Button onClick={ () => modalStore.open(<LoginForm />) } size='huge' inverted>\r\n                                Login\r\n                            </Button>\r\n                            <Button onClick={ () => modalStore.open(<RegisterForm />) } size='huge' inverted>\r\n                                Register\r\n                            </Button>\r\n                        </>\r\n                    )}                \r\n            </Container>\r\n        </Segment>\r\n    )\r\n})","import { Dimmer, Loader } from 'semantic-ui-react';\r\n\r\ninterface Props {\r\n    inverted?: boolean;\r\n    content?: string;\r\n}\r\n\r\nexport default function LoadingComponent({inverted = true, content = 'Loading...'}: Props) {\r\n    return (\r\n        <Dimmer active={true} inverted={inverted}>\r\n            <Loader content={content} />\r\n        </Dimmer>\r\n    )\r\n}","import { useField } from \"formik\";\r\nimport { Form, Label } from \"semantic-ui-react\";\r\n\r\ninterface Props {\r\n    placeholder: string;\r\n    name: string;\r\n    rows: number;\r\n    label?: string;\r\n}\r\n\r\nexport default function TextArea(props: Props) {\r\n    const [field, meta] = useField(props.name);\r\n\r\n    return (\r\n        <Form.Field error={ meta.touched && !!meta.error }>\r\n            <label>{ props.label }</label>\r\n            <textarea { ...field} { ...props } />\r\n            {\r\n                meta.touched && meta.error\r\n                ? (<Label basic color='red'>{ meta.error }</Label>)\r\n                : null\r\n            }\r\n        </Form.Field>\r\n    )\r\n}","import { useField } from \"formik\";\r\nimport { Form, Label, Select } from \"semantic-ui-react\";\r\n\r\ninterface Props {\r\n    placeholder: string;\r\n    name: string;\r\n    options: any;\r\n    label?: string;\r\n}\r\n\r\nexport default function SelectInput(props: Props) {\r\n    const [field, meta, helpers] = useField(props.name);\r\n\r\n    return (\r\n        <Form.Field error={ meta.touched && !!meta.error }>\r\n            <label>{ props.label }</label>\r\n            <Select clearable \r\n                options={ props.options }\r\n                value={ field.value || null }\r\n                onChange={ (event, data) => helpers.setValue(data.value) }\r\n                onBlur={ () => helpers.setTouched(true) }\r\n                placeholder={ props.placeholder }\r\n            />\r\n            {\r\n                meta.touched && meta.error\r\n                ? (<Label basic color='red'>{ meta.error }</Label>)\r\n                : null\r\n            }\r\n        </Form.Field>\r\n    )\r\n}","export const categoryOptions = [\r\n    {text: 'Drinks', value: 'drinks'},\r\n    {text: 'Culture', value: 'culture'},\r\n    {text: 'Film', value: 'film'},\r\n    {text: 'Food', value: 'food'},\r\n    {text: 'Music', value: 'music'},\r\n    {text: 'Travel', value: 'travel'}\r\n]","import { useField } from \"formik\";\r\nimport { Form, Label } from \"semantic-ui-react\";\r\nimport DatePicker, { ReactDatePickerProps } from 'react-datepicker';\r\n\r\n                                        /* by using 'Partial<>' all of the properties in the props are optional.\r\n                                        This was used because giving error because not pasing 'onChange' property on 'ActivityForm',\r\n                                        but it is already established inside the 'DatePicker' here... */\r\nexport default function DateInput(props: Partial<ReactDatePickerProps>) {\r\n    const [field, meta, helpers] = useField(props.name!);\r\n\r\n    return (\r\n        <Form.Field error={ meta.touched && !!meta.error }>\r\n            <DatePicker\r\n                { ...field }\r\n                { ...props }\r\n                selected={ (field.value && new Date(field.value)) || null }\r\n                onChange={ value => helpers.setValue(value) }\r\n            />\r\n            {\r\n                meta.touched && meta.error\r\n                ? (<Label basic color='red'>{ meta.error }</Label>)\r\n                : null\r\n            }\r\n        </Form.Field>\r\n    )\r\n}","import { observer } from 'mobx-react-lite';\r\nimport { useEffect, useState } from 'react';\r\nimport { useHistory, useParams } from 'react-router';\r\nimport { Link } from 'react-router-dom';\r\nimport { Button, Header, Segment } from 'semantic-ui-react';\r\nimport LoadingComponent from '../../../app/layout/LoadingComponent';\r\nimport { useStore } from '../../../app/stores/store';\r\nimport { v4 as uuid } from 'uuid';\r\nimport { Formik, Form } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport TextInput from '../../../app/common/form/TextInput';\r\nimport TextArea from '../../../app/common/form/TextArea';\r\nimport SelectInput from '../../../app/common/form/SelectInput';\r\nimport { categoryOptions } from '../../../app/common/select_options/categoryOptions';\r\nimport DateInput from '../../../app/common/form/DateInput';\r\nimport { ActivityFormValues } from '../../../app/models/activity';\r\n  \r\nexport default observer(function ActivityForm() {\r\n    const history = useHistory();\r\n    const { activityStore } = useStore();\r\n    const { id } = useParams<{ id: string }>();\r\n\r\n    const [formActivity, setActivity] = useState<ActivityFormValues>(new ActivityFormValues());\r\n\r\n    const validationSchema = Yup.object({\r\n        title: Yup.string().required('The activity title is required'),\r\n        description: Yup.string().required('The activity description is required'),\r\n        category: Yup.string().required('The activity category is required'),\r\n        date: Yup.string().required('The activity date is required'),\r\n        venue: Yup.string().required('The activity venue is required'),\r\n        city: Yup.string().required('The activity category is required')\r\n    })\r\n\r\n    useEffect(() => {\r\n        if (id) activityStore.detail(id).then(activity => setActivity(new ActivityFormValues(activity)));\r\n    }, [id, activityStore])\r\n\r\n    function handleFormSubmit(formActivity: ActivityFormValues) {\r\n        if (!formActivity.id) {\r\n            formActivity.id = uuid();\r\n\r\n            activityStore.create(formActivity).then(() => {\r\n                history.push(`/activities/${formActivity.id}`);\r\n            })\r\n        } else {\r\n            activityStore.update(formActivity).then(() => {\r\n                history.push(`/activities/${formActivity.id}`);\r\n            });\r\n        }\r\n    }\r\n\r\n    if (activityStore.loadingInitial) return <LoadingComponent content='Loading Activity...' />\r\n\r\n    return (\r\n        <Segment clearing>\r\n            <Header content='Activity Details' sub color='teal' />\r\n            <Formik enableReinitialize\r\n                initialValues={ formActivity }\r\n                validationSchema={ validationSchema }\r\n                onSubmit={ values => handleFormSubmit(values) }\r\n            >\r\n                {({ handleSubmit, isValid, isSubmitting, dirty }) => (\r\n                    <Form className='ui form' onSubmit={ handleSubmit } autoComplete='off'>\r\n                        {/* <FormTextInput>\r\n                            <TextInput placeholder='Title' name='title' />\r\n                            <ErrorMessage name='title' render={ error => <Label basic color='red' content={ error } /> } />\r\n                        </FormTextInput> */}\r\n\r\n                        <TextInput placeholder='Title' name='title' />\r\n                        <TextArea rows={ 3 } placeholder='Description' name='description' />\r\n                        <SelectInput options={ categoryOptions } placeholder='Category' name='category' />\r\n                        <DateInput placeholderText='Date' name='date' showTimeSelect timeCaption='time' dateFormat='MMMM d, yyyy h:mm aa' />\r\n\r\n                        <Header content='Location Details' sub color='teal' />\r\n                        <TextInput placeholder='City' name='city' />\r\n                        <TextInput placeholder='Venue' name='venue' />\r\n\r\n                        <Button \r\n                            disabled={ isSubmitting || !dirty || !isValid }\r\n                            loading={ isSubmitting } \r\n                            floated='right' positive type='submit' content='Submit'\r\n                        />\r\n                        <Button as={ Link } to='/activities' floated='right' type='button' content='Cancel' />\r\n                    </Form>\r\n                )}\r\n            </Formik>\r\n\r\n        </Segment>\r\n    );\r\n})","import { Formik, Form, Field, FieldProps } from 'formik';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Segment, Header, Comment, Loader } from 'semantic-ui-react';\r\nimport { useStore } from '../../../app/stores/store';\r\nimport * as Yup from 'yup';\r\nimport { formatDistanceToNow } from 'date-fns';\r\n\r\ninterface Props {\r\n    activityId: string;\r\n}\r\n\r\nexport default observer(function ActivityDetailedChat({ activityId } : Props) {\r\n    const { commentStore } = useStore();\r\n\r\n    useEffect(() => {\r\n        if (activityId) {\r\n            commentStore.createHubConnection(activityId);\r\n        }\r\n\r\n        return () => {\r\n            commentStore.clearComments();\r\n        }\r\n    }, [commentStore, activityId])\r\n\r\n    return (\r\n        <>\r\n            <Segment\r\n                textAlign='center'\r\n                attached='top'\r\n                inverted\r\n                color='teal'\r\n                style={{ border: 'none' }}\r\n            >\r\n            <Header>Comments</Header>\r\n            </Segment>\r\n            <Segment attached clearing>\r\n                <Formik\r\n                    onSubmit={ (values, { resetForm }) => commentStore.addComment(values).then(() => resetForm()) }\r\n                    initialValues={ {body: ''} }\r\n                    validationSchema={ Yup.object({\r\n                        body: Yup.string().required()\r\n                    }) }\r\n                >\r\n                {\r\n                    ({ isSubmitting, isValid, handleSubmit }) => (\r\n                        <Form className='ui form'>\r\n                            <Field name='body'>\r\n                                {\r\n                                    (props : FieldProps) => (\r\n                                    <div style={ {position: 'relative'} }>\r\n                                        <Loader active={ isSubmitting } />\r\n                                        <textarea \r\n                                            placeholder='Type comment...'\r\n                                            rows={ 2 }\r\n                                            { ...props.field }\r\n                                            onKeyPress={ keyboardEvent => {\r\n                                                if (keyboardEvent.key === 'Enter')\r\n                                                {\r\n                                                    if (keyboardEvent.shiftKey) \r\n                                                    {\r\n                                                        return;\r\n                                                    }\r\n                                                    else\r\n                                                    {\r\n                                                        keyboardEvent.preventDefault();\r\n                                                        isValid && handleSubmit();\r\n                                                    }\r\n                                                }\r\n                                            }}\r\n                                        />\r\n                                    </div>) \r\n                                }\r\n                            </Field>\r\n                        </Form>\r\n                    )\r\n                }\r\n                </Formik>\r\n                <Comment.Group>\r\n                    {\r\n                        commentStore.activityComments.map(comment => (\r\n                            <Comment key={ comment.id }>\r\n                                <Comment.Avatar src={ comment.image || '/assets/user.png' } />\r\n                                <Comment.Content>\r\n                                    <Comment.Author as={ Link } to={ `/profiles/${comment.username}` }>{ comment.displayName }</Comment.Author>\r\n                                    <Comment.Metadata>\r\n                                        <div>{ formatDistanceToNow(comment.createdAt) } ago</div>\r\n                                    </Comment.Metadata>\r\n                                    <Comment.Text style={ {whiteSpace: 'pre-wrap'} }>{ comment.body }</Comment.Text>\r\n                                </Comment.Content>\r\n                            </Comment>\r\n                        ))\r\n                    }\r\n                </Comment.Group>\r\n            </Segment>\r\n        </>\r\n    )\r\n})","import { observer } from 'mobx-react-lite';\r\nimport { Link } from 'react-router-dom';\r\nimport { Button, Header, Item, Segment, Image, Label } from 'semantic-ui-react'\r\nimport { Activity } from '../../../app/models/activity';\r\nimport { format } from \"date-fns\";\r\nimport { useStore } from '../../../app/stores/store';\r\n\r\nconst activityImageStyle = {\r\n    filter: 'brightness(30%)'\r\n};\r\n\r\nconst activityImageTextStyle = {\r\n    position: 'absolute',\r\n    bottom: '5%',\r\n    left: '5%',\r\n    width: '100%',\r\n    height: 'auto',\r\n    color: 'white'\r\n};\r\n\r\ninterface Props {\r\n    activity: Activity\r\n}\r\n\r\nexport default observer (function ActivityDetailedHeader({activity}: Props) {\r\n    const { activityStore } = useStore();\r\n\r\n    return (\r\n        <Segment.Group>\r\n            <Segment basic attached='top' style={ {padding: '0'} }>\r\n                <Image src={`/assets/categoryImages/${activity.category}.jpg`} fluid style={ activityImageStyle }/>\r\n                { activity.isCancelled && (\r\n                    <Label style={ {position: 'absolute', zIndex: 1000, left: -14, top: 20} } ribbon color='red' content='Cancelled' />\r\n                )}\r\n                <Segment style={ activityImageTextStyle } basic>\r\n                    <Item.Group>\r\n                        <Item>\r\n                            <Item.Content>\r\n                                <Header\r\n                                    size='huge'\r\n                                    content={ activity.title }\r\n                                    style={{ color: 'white' }}\r\n                                />\r\n                                { activity.date &&\r\n                                    <p>{ format(activity.date!, 'dd MMM yyyy') }</p>\r\n                                }\r\n                                <p>\r\n                                    Hosted by <strong><Link to={ `/profiles/${activity.host?.username}` }>{ activity.host?.displayName }</Link></strong>\r\n                                </p>\r\n                            </Item.Content>\r\n                        </Item>\r\n                    </Item.Group>\r\n                </Segment>\r\n            </Segment>\r\n            <Segment clearing attached='bottom'>\r\n                { activity.isHost ? (\r\n                    <>\r\n                        <Button\r\n                            onClick={ activityStore.cancel }\r\n                            loading={ activityStore.loading }\r\n                            color={ activity.isCancelled ? 'green' : 'red' }\r\n                            floated='right' content={ activity.isCancelled ? 'Re-Activate Activity' : 'Cancel Activity' }\r\n                        />\r\n                        <Button disabled={ activity.isCancelled } as={ Link } to={ `/edit/${activity.id}` } color='orange' floated='right'>\r\n                            Manage Event\r\n                        </Button>\r\n                    </>\r\n                ) : activity.isGoing\r\n                    ? (\r\n                        <Button loading={ activityStore.loading } onClick={ activityStore.attend }>Cancel attendance</Button>\r\n                    ) : (\r\n                        <Button disabled={ activity.isCancelled } loading={ activityStore.loading } onClick={ activityStore.attend } color='teal'>Join Activity</Button>\r\n                    ) }\r\n            </Segment>\r\n        </Segment.Group>\r\n    )\r\n})","import { observer } from 'mobx-react-lite';\r\nimport {Segment, Grid, Icon} from 'semantic-ui-react'\r\nimport {Activity} from \"../../../app/models/activity\";\r\nimport { format } from \"date-fns\";\r\n\r\ninterface Props {\r\n    activity: Activity\r\n}\r\n\r\nexport default observer(function ActivityDetailedInfo({activity}: Props) {\r\n    return (\r\n        <Segment.Group>\r\n            <Segment attached='top'>\r\n                <Grid>\r\n                    <Grid.Column width='1'>\r\n                        <Icon size='large' color='teal' name='info'/>\r\n                    </Grid.Column>\r\n                    <Grid.Column width='15'>\r\n                        <p>{ activity.description }</p>\r\n                    </Grid.Column>\r\n                </Grid>\r\n            </Segment>\r\n            <Segment attached>\r\n                <Grid verticalAlign='middle'>\r\n                    <Grid.Column width='1'>\r\n                        <Icon name='calendar' size='large' color='teal'/>\r\n                    </Grid.Column>\r\n                    <Grid.Column width='15'>\r\n                    { activity.date &&\r\n                        <span>\r\n                        { format(activity.date!, 'dd MMM yyyy h:mm aa') }\r\n                        </span>\r\n                    }\r\n                    </Grid.Column>\r\n                </Grid>\r\n            </Segment>\r\n            <Segment attached>\r\n                <Grid verticalAlign='middle'>\r\n                    <Grid.Column width='1'>\r\n                        <Icon name='marker' size='large' color='teal'/>\r\n                    </Grid.Column>\r\n                    <Grid.Column width='11'>\r\n                        <span>{ activity.venue }, { activity.city }</span>\r\n                    </Grid.Column>\r\n                </Grid>\r\n            </Segment>\r\n        </Segment.Group>\r\n    )\r\n})","import { Segment, List, Label, Item, Image } from 'semantic-ui-react';\r\nimport { Link } from 'react-router-dom';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { Activity } from '../../../app/models/activity';\r\n\r\ninterface Props {\r\n    activity: Activity;\r\n}\r\n\r\nexport default observer(function ActivityDetailedSidebar({ activity: { attendees, host } } : Props) {\r\n    if (!attendees) return null;\r\n\r\n    return (\r\n        <>\r\n            <Segment\r\n                textAlign='center'\r\n                style={{ border: 'none' }}\r\n                attached='top'\r\n                secondary\r\n                inverted\r\n                color='teal'\r\n            >\r\n                { attendees.length } { attendees.length === 1 ? 'Person' : 'People' } Going\r\n            </Segment>\r\n            <Segment attached>\r\n                <List relaxed divided>\r\n                    { attendees.map(attendee => (\r\n                        <Item style={ {position: 'relative'} } key={ attendee.username }>\r\n                            { attendee.username === host?.username && (\r\n                                <Label\r\n                                style={ {position: 'absolute'} }\r\n                                color='orange'\r\n                                ribbon='right'\r\n                                >\r\n                                Host\r\n                                </Label>\r\n                            ) }\r\n                            <Image size='tiny' src={ attendee.image || '/assets/user.png' } />\r\n                            <Item.Content verticalAlign='middle'>\r\n                                <Item.Header as='h3'>\r\n                                    <Link to={ `/profiles/${attendee.username}` }>{ attendee.displayName }</Link>\r\n                                </Item.Header>\r\n                                {\r\n                                    attendee.following && (\r\n                                        <Item.Extra style={ {color: 'orange'} }>Following</Item.Extra>)\r\n                                }\r\n                            </Item.Content>\r\n                        </Item>\r\n                    )) }\r\n                </List>\r\n            </Segment>\r\n        </>\r\n    )\r\n})","import { observer } from \"mobx-react-lite\";\r\nimport { useEffect } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport { Grid } from \"semantic-ui-react\";\r\nimport LoadingComponent from \"../../../app/layout/LoadingComponent\";\r\nimport { useStore } from \"../../../app/stores/store\";\r\nimport ActivityDetailedChat from \"./ActivityDetailedChat\";\r\nimport ActivityDetailedHeader from \"./ActivityDetailedHeader\";\r\nimport ActivityDetailedInfo from \"./ActivityDetailedInfo\";\r\nimport ActivityDetailedSidebar from \"./ActivityDetailedSidebar\";\r\n\r\nexport default observer(function ActivityDetails() {\r\n  const { activityStore } = useStore();\r\n  const { selectedActivity: activity } = activityStore;\r\n  const { id } = useParams<{id: string}>();\r\n\r\n  useEffect(() => {\r\n    if (id) activityStore.detail(id);\r\n    return () => activityStore.setSelectedActivity(undefined);\r\n  }, [id, activityStore]);\r\n\r\n  if (activityStore.loadingInitial || !activity) return <LoadingComponent content='Fetching Activity...' />;\r\n\r\n  return (\r\n    <Grid>\r\n      <Grid.Column width='10'>\r\n        <ActivityDetailedHeader activity={ activity }/>\r\n        <ActivityDetailedInfo  activity={ activity }/>\r\n        <ActivityDetailedChat activityId={ activity.id } />\r\n      </Grid.Column>\r\n      <Grid.Column width='6'>\r\n        <ActivityDetailedSidebar activity={ activity }/>\r\n      </Grid.Column>\r\n    </Grid>\r\n  );\r\n})","import { Button, Header, Segment } from \"semantic-ui-react\";\r\nimport axios from 'axios';\r\nimport { useState } from \"react\";\r\nimport ValidationErrors from \"./ValidationErrors\";\r\n\r\nexport default function TestErrors() {\r\n    const baseUrl = process.env.REACT_APP_API_URL;\r\n    const [errors, setErrors] = useState(null);\r\n\r\n    function handleNotFound() {\r\n        axios.get(baseUrl + 'error/not-found').catch(err => console.log(err.response));\r\n    }\r\n\r\n    function handleBadRequest() {\r\n        axios.get(baseUrl + 'error/bad-request').catch(err => console.log(err.response));\r\n    }\r\n\r\n    function handleServerError() {\r\n        axios.get(baseUrl + 'error/server-error').catch(err => console.log(err.response));\r\n    }\r\n\r\n    function handleUnauthorised() {\r\n        axios.get(baseUrl + 'error/unauthorised').catch(err => console.log(err.response));\r\n    }\r\n\r\n    function handleBadGuid() {\r\n        axios.get(baseUrl + 'activities/notaguid').catch(err => console.log(err));\r\n    }\r\n\r\n    function handleValidationError() {\r\n        axios.post(baseUrl + 'activities', {}).catch(err => setErrors(err));\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header as='h1' content='Test Validation Error' />\r\n            <Segment>\r\n                <Button.Group widths='7'>\r\n                    <Button onClick={ handleNotFound } content='Not Found' basic primary />\r\n                    <Button onClick={ handleBadRequest } content='Bad Request' basic primary />\r\n                    <Button onClick={ handleValidationError } content='Validation Error' basic primary />\r\n                    <Button onClick={ handleServerError } content='Server Error' basic primary />\r\n                    <Button onClick={ handleUnauthorised } content='Unauthorised' basic primary />\r\n                    <Button onClick={ handleBadGuid } content='Bad Guid' basic primary />\r\n                </Button.Group>\r\n            </Segment>\r\n            { errors &&\r\n                <ValidationErrors errors={ errors } />\r\n            }\r\n        </>\r\n    )\r\n}","import { Link } from \"react-router-dom\";\r\nimport { Button, Header, Icon, Segment } from \"semantic-ui-react\";\r\n\r\nexport default function NotFound() {\r\n    return (\r\n        <Segment placeholder>\r\n            <Header icon>\r\n                <Icon name='search' />\r\n                Oops - we've looked everywhere and could not find this...\r\n            </Header>\r\n            <Segment.Inline>\r\n                <Button as={ Link } to='/activities' primary >\r\n                    Return to activities page\r\n                </Button>\r\n            </Segment.Inline>\r\n        </Segment>\r\n    )\r\n}","import { observer } from \"mobx-react-lite\";\r\nimport { Container, Header, Segment } from \"semantic-ui-react\";\r\nimport { useStore } from \"../../app/stores/store\";\r\n\r\nexport default observer(function ServerError() {\r\n    const { commonStore } = useStore();\r\n    \r\n    return (\r\n        <Container>\r\n            <Header as='h1' content='Server Error' />\r\n            <Header sub as='h5' color='red' content={ commonStore.error?.message } />\r\n            { commonStore.error &&\r\n                <Segment>\r\n                    <Header as='h4' content='Stack trace' color='teal' />\r\n                    <code style={{ marginTop: '10px' }}>{ commonStore.error }</code>\r\n                </Segment>\r\n            }\r\n        </Container>\r\n    )\r\n})","import { observer } from \"mobx-react-lite\";\r\nimport { Modal } from \"semantic-ui-react\";\r\nimport { useStore } from \"../../stores/store\"\r\n\r\nexport default observer(function ModalContainer() {\r\n    const { modalStore } = useStore();\r\n\r\n    return (\r\n        <Modal open={ modalStore.modal.open } onClose={ modalStore.close } size='mini'>\r\n            <Modal.Content>\r\n                { modalStore.modal.body }\r\n            </Modal.Content>\r\n        </Modal>\r\n    )\r\n})","import { Form, Formik } from \"formik\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { Button } from \"semantic-ui-react\";\r\nimport TextInput from \"../../app/common/form/TextInput\";\r\nimport TextArea from \"../../app/common/form/TextArea\";\r\nimport { useStore } from \"../../app/stores/store\";\r\nimport * as Yup from 'yup';\r\n\r\ninterface Props {\r\n    setEditMode: (editMode: boolean) => void;\r\n}\r\n\r\nexport default observer(function ProfileEditForm({ setEditMode } : Props) {\r\n    const { profileStore } = useStore();\r\n    const { profile } = profileStore;\r\n\r\n    return (\r\n        <Formik\r\n            initialValues={ {displayName: profile?.displayName, bio: profile?.bio} }\r\n            onSubmit={ values => {\r\n                profileStore.update(values).then(() => {\r\n                    setEditMode(false);\r\n                })\r\n            } }\r\n            validationSchema={ Yup.object({\r\n                displayName: Yup.string().required()\r\n            }) }\r\n        >\r\n            {\r\n                ({ isSubmitting, isValid, dirty }) => (\r\n                <Form className='ui form'>\r\n                    <TextInput placeholder='Display Name' name='displayName' />\r\n                    <TextArea rows={3} placeholder='Add bio' name='bio' />\r\n                    <Button \r\n                        positive\r\n                        type='submit'\r\n                        loading={ isSubmitting }\r\n                        content='Update profile'\r\n                        floated='right'\r\n                        disabled={ !isValid || !dirty }\r\n                    />\r\n                </Form>)\r\n            }\r\n        </Formik>\r\n    )\r\n})","import { useState } from 'react';\r\nimport { useStore } from \"../../app/stores/store\";\r\nimport { Button, Grid, Header, Tab } from \"semantic-ui-react\";\r\nimport ProfileEditForm from \"./ProfileEditForm\";\r\nimport { observer } from 'mobx-react-lite';\r\n\r\nexport default observer(function ProfileAbout() {\r\n    const { profileStore } = useStore();\r\n    const { isProfileFromCurrentUser, profile } = profileStore;\r\n    const [editMode, setEditMode] = useState(false);\r\n\r\n    return (\r\n        <Tab.Pane>\r\n            <Grid>\r\n                <Grid.Column width='16'>\r\n                    <Header floated='left' icon='user' content={ `About ${profile?.displayName}` } />\r\n                    {\r\n                        isProfileFromCurrentUser && (\r\n                        <Button\r\n                            floated='right'\r\n                            basic\r\n                            content={ editMode ? 'Cancel' : 'Edit Profile' }\r\n                            onClick={ () => setEditMode(!editMode) }\r\n                        />)\r\n                    }\r\n                </Grid.Column>\r\n                <Grid.Column width='16'>\r\n                    {\r\n                        editMode\r\n                            ? <ProfileEditForm setEditMode={ setEditMode } />\r\n                            : <span style={ {whiteSpace: 'pre-wrap'} }>{ profile?.bio }</span>\r\n                    }\r\n                </Grid.Column>\r\n            </Grid>\r\n        </Tab.Pane>\r\n    )\r\n})","import { SyntheticEvent, useEffect } from 'react';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { Tab, Grid, Header, Card, Image, TabProps } from 'semantic-ui-react';\r\nimport { Link } from 'react-router-dom';\r\nimport { ProfileActivity } from '../../app/models/profile';\r\nimport { format } from 'date-fns';\r\nimport { useStore } from \"../../app/stores/store\";\r\n\r\nconst panes = [\r\n    { menuItem: 'Future Events', pane: { key: 'future' } },\r\n    { menuItem: 'Hosting', pane: { key: 'hosting' } },\r\n    { menuItem: 'Past Events', pane: { key: 'past' } }\r\n];\r\n\r\nexport default observer(function ProfileActivities() {\r\n    const { profileStore } = useStore();\r\n    const {\r\n        loadProfileActivities,\r\n        profile,\r\n        loadingActivities,\r\n        profileActivities\r\n    } = profileStore;\r\n\r\n    useEffect(() => {\r\n        loadProfileActivities(profile!.username);\r\n    }, [loadProfileActivities, profile]);\r\n\r\n    const handleTabChange = (syntheticEvent: SyntheticEvent, tabProps: TabProps) => {\r\n        loadProfileActivities(profile!.username, panes[tabProps.activeIndex as number].pane.key);\r\n    };\r\n\r\n    return (\r\n        <Tab.Pane loading={ loadingActivities }>\r\n            <Grid>\r\n                <Grid.Column width='16'>\r\n                    <Header floated='left' icon='calendar' content={'Activities'} />\r\n                </Grid.Column>\r\n                <Grid.Column width='16'>\r\n                    <Tab\r\n                        panes={ panes }\r\n                        menu={{ secondary: true, pointing: true }}\r\n                        onTabChange={(e, data) => handleTabChange(e, data)}\r\n                    />\r\n                    <br />\r\n                    <Card.Group itemsPerRow='4'>\r\n                    {\r\n                        profileActivities.map((activity: ProfileActivity) => (\r\n                            <Card\r\n                                as={ Link }\r\n                                to={ `/activities/${activity.id}` }\r\n                                key={ activity.id }\r\n                            >\r\n                                <Image\r\n                                    src={ `/assets/categoryImages/${activity.category}.jpg` }\r\n                                    style={ {minHeight: 100, objectFit: 'cover'} }\r\n                                />\r\n                                <Card.Content>\r\n                                    <Card.Header textAlign='center'>{ activity.title }</Card.Header>\r\n                                    <Card.Meta textAlign='center'>\r\n                                        <div>{ format(new Date(activity.date), 'do LLL') }</div>\r\n                                        <div>{ format(new Date(activity.date), 'h:mm a') }</div>\r\n                                    </Card.Meta>\r\n                                </Card.Content>\r\n                            </Card>\r\n                        ))\r\n                    }\r\n                    </Card.Group>\r\n                </Grid.Column>\r\n            </Grid>\r\n        </Tab.Pane>\r\n    );\r\n});","import { observer } from \"mobx-react-lite\";\r\nimport { Card, Grid, Header, Tab } from \"semantic-ui-react\";\r\nimport { useStore } from \"../../app/stores/store\";\r\nimport ProfileCard from \"./ProfileCard\";\r\n\r\nexport default observer(function ProfileFollowings() {\r\n    const { profileStore } = useStore();\r\n    const { profile } = profileStore;\r\n\r\n    return (\r\n        <Tab.Pane loading={ profileStore.followingsLoading }>\r\n            <Grid>\r\n                <Grid.Column width='16'>\r\n                    <Header\r\n                        floated='left' icon='user'\r\n                        content={ 'People ' + (profileStore.activeTab === 3 ? `following ${profile?.displayName}` : `${profile?.displayName} is following`) }\r\n                    />\r\n                </Grid.Column>\r\n                <Grid.Column width='16'>\r\n                    <Card.Group itemsPerRow='4'>\r\n                        {\r\n                            profileStore.followings.map(profile => (\r\n                                <ProfileCard key={ profile.username } profile={ profile } />))\r\n                        }\r\n                    </Card.Group>\r\n                </Grid.Column>\r\n            </Grid>\r\n        </Tab.Pane>\r\n    )\r\n})","import { useCallback } from 'react'\r\nimport { useDropzone } from 'react-dropzone'\r\nimport { Header, Icon } from 'semantic-ui-react'\r\n\r\ninterface Props {\r\n  setFiles: (files: any) => void;\r\n}\r\n\r\nexport default function PhotoWidgetDropzone({ setFiles } : Props) {\r\n  const dropzoneDefaultStyle = {\r\n    border: 'dashed 3px #eee',\r\n    borderColor: '#eee',\r\n    borderRadius: '5px',\r\n    paddingTop: '30px',\r\n    textAlign: 'center' as 'center',\r\n    height: 200\r\n  }\r\n\r\n  const dropzoneActiveStyle = {\r\n    borderColor: 'green'\r\n  }\r\n\r\n  const onDrop = useCallback(acceptedFiles => {\r\n    setFiles(acceptedFiles.map((file: any) => Object.assign(file, {\r\n      preview: URL.createObjectURL(file)\r\n    })))\r\n  }, [setFiles])\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop })\r\n\r\n  return (\r\n    <div { ...getRootProps() } style={ isDragActive ? { ...dropzoneDefaultStyle, ...dropzoneActiveStyle } : dropzoneDefaultStyle }>\r\n      <input { ...getInputProps() } />\r\n      <Icon name='upload' size='huge' />\r\n      <Header content='Drop image here' />\r\n      {/* {\r\n        isDragActive\r\n          ? <p>Drop the files here ...</p>\r\n          : <p>Drag 'n' drop some files here, or click to select files</p>\r\n      } */}\r\n    </div>\r\n  )\r\n}","import { Cropper } from 'react-cropper';\r\nimport 'cropperjs/dist/cropper.css';\r\n\r\ninterface Props {\r\n    setCropper: (cropper: Cropper) => void;\r\n    imagePreview: string;\r\n}\r\n\r\nexport default function PhotoWidgetCropper({ setCropper, imagePreview } : Props) {\r\n    return (\r\n        <Cropper\r\n            src={ imagePreview }\r\n            style={ {height: 200, width: '100%'} }\r\n            initialAspectRatio={ 1 }\r\n            aspectRatio={ 1 }\r\n            preview='.img-preview'\r\n            guides={ false }\r\n            viewMode={ 1 }\r\n            autoCropArea={ 1 }\r\n            background={ false }\r\n            onInitialized={ (cropper: Cropper) => setCropper(cropper) }\r\n        />\r\n    )\r\n}","import { useEffect, useState } from \"react\";\r\nimport { Button, Grid, Header } from \"semantic-ui-react\";\r\nimport PhotoWidgetDropzone from \"./PhotoWidgetDropzone\";\r\nimport PhotoWidgetCropper from \"./PhotoWidgetCropper\";\r\n\r\ninterface Props {\r\n    uploadPhoto: (file: Blob) => void;\r\n    loading: boolean;\r\n}\r\n\r\nexport default function PhotoUploadWidget({ uploadPhoto, loading } : Props) {\r\n    const [files, setFiles] = useState<any>([]);\r\n    const [cropper, setCropper] = useState<Cropper>();\r\n\r\n    function onCrop() {\r\n        if (cropper) {\r\n            cropper.getCroppedCanvas().toBlob(blob => uploadPhoto(blob!));\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            files.forEach((file: any) => {\r\n                URL.revokeObjectURL(file.preview);\r\n            });\r\n        }\r\n    }, [files])\r\n\r\n    return (\r\n        <Grid>\r\n            <Grid.Column width='4'>\r\n                <Header color='teal' content='Step 1 - Add Photo' />\r\n                <PhotoWidgetDropzone setFiles={ setFiles }/>\r\n            </Grid.Column>\r\n            <Grid.Column width='1' />\r\n            <Grid.Column width='4'>\r\n                <Header color='teal' content='Step 2 - Resize' />\r\n                {\r\n                    files && files.length > 0 && (\r\n                        <PhotoWidgetCropper setCropper={ setCropper } imagePreview={ files[0].preview } />\r\n                    )\r\n                }\r\n            </Grid.Column>\r\n            <Grid.Column width='1' />\r\n            <Grid.Column width='4'>\r\n                <Header sub color='teal' content='Step 3 - Preview & Upload' />\r\n                {\r\n                    files && files.length > 0 && (\r\n                        <>\r\n                            <div className='img-preview' style={ {minHeight: 200, overflow: 'hidden'} } />\r\n                            <Button.Group widths={ 2 }>\r\n                                <Button loading={ loading } onClick={ onCrop } positive icon='check' />\r\n                                <Button disabled={ loading } onClick={ () => setFiles([]) } icon='close' />\r\n                            </Button.Group>\r\n                        </>)\r\n                }\r\n            </Grid.Column>\r\n        </Grid>\r\n    )\r\n}","import { observer } from \"mobx-react-lite\";\r\nimport { SyntheticEvent, useState } from \"react\";\r\nimport { Button, Card, Grid, Header, Image, Tab } from \"semantic-ui-react\";\r\nimport PhotoUploadWidget from \"../../app/common/image_upload/PhotoUploadWidget\";\r\nimport { Photo, Profile } from \"../../app/models/profile\";\r\nimport { useStore } from \"../../app/stores/store\";\r\n\r\ninterface Props {\r\n    profile: Profile;\r\n}\r\n\r\nexport default observer(function ProfilePhotos({profile} : Props) {\r\n    const { profileStore } = useStore();\r\n    const [target, setTarget] = useState('');\r\n    const [addPhotoMode, setAddPhotoMode] = useState(false);\r\n\r\n    function handlePhotoUpload(file: Blob) {\r\n        profileStore.uploadPhoto(file).then(() => setAddPhotoMode(false));\r\n    }\r\n\r\n    function handleSetMainPhoto(photo: Photo, syntheticEvent: SyntheticEvent<HTMLButtonElement>) {\r\n        setTarget(syntheticEvent.currentTarget.name);\r\n        profileStore.setMainPhoto(photo);\r\n    }\r\n\r\n    function handleDeletePhoto(photo: Photo, syntheticEvent: SyntheticEvent<HTMLButtonElement>) {\r\n        setTarget(syntheticEvent.currentTarget.name);\r\n        profileStore.deletePhoto(photo);\r\n    }\r\n\r\n    return (\r\n        <Tab.Pane>\r\n            <Grid>\r\n                <Grid.Column width='16'>\r\n                    <Header floated='left' icon='image' content='Photos' />\r\n                    {\r\n                        profileStore.isProfileFromCurrentUser && (\r\n                            <Button\r\n                                floated='right' basic\r\n                                content={ addPhotoMode ? 'Cancel' : 'Add Photo' }\r\n                                onClick={ () => setAddPhotoMode(!addPhotoMode) }\r\n                            />)\r\n                    }\r\n                </Grid.Column>\r\n                <Grid.Column width='16'>\r\n                    { addPhotoMode ? (\r\n                        <PhotoUploadWidget uploadPhoto={ handlePhotoUpload } loading={ profileStore.uploading }/>\r\n                    ) : (\r\n                        <Card.Group itemsPerRow='5'>\r\n                            { profile.photos?.map(photo => (\r\n                                <Card key={ photo.id }>\r\n                                    <Image src={ photo.url } />\r\n                                    {\r\n                                        !photo.isMain && profileStore.isProfileFromCurrentUser && (\r\n                                            <Button.Group fluid widths={ 2 }>\r\n                                                <Button\r\n                                                    basic\r\n                                                    color='green'\r\n                                                    content='Main'\r\n                                                    name={ 'setMainPhotoButton' + photo.id }\r\n                                                    disabled={ photo.isMain }\r\n                                                    loading={ target === 'setMainPhotoButton' + photo.id && profileStore.mainLoading }\r\n                                                    onClick={ mouseEvent => handleSetMainPhoto(photo, mouseEvent) }\r\n                                                />\r\n                                                <Button\r\n                                                    basic\r\n                                                    color='red'\r\n                                                    icon='trash'\r\n                                                    name={ 'deletePhotoButton' + photo.id }\r\n                                                    disabled={ photo.isMain }\r\n                                                    loading={ target === 'deletePhotoButton' + photo.id && profileStore.mainLoading }\r\n                                                    onClick={ mouseEvent => handleDeletePhoto(photo, mouseEvent) }\r\n                                                />\r\n                                            </Button.Group>\r\n                                        )\r\n                                    }\r\n                                </Card>\r\n                            )) }\r\n                        </Card.Group>\r\n                    )}\r\n                </Grid.Column>\r\n            </Grid>\r\n        </Tab.Pane>\r\n    )\r\n})","import { observer } from \"mobx-react-lite\"\r\nimport { Tab } from \"semantic-ui-react\"\r\nimport { Profile } from \"../../app/models/profile\"\r\nimport { useStore } from \"../../app/stores/store\"\r\nimport ProfileAbout from \"./ProfileAbout\"\r\nimport ProfileActivities from \"./ProfileActivities\"\r\nimport ProfileFollowings from \"./ProfileFollowings\"\r\nimport ProfilePhotos from \"./ProfilePhotos\"\r\n\r\ninterface Props {\r\n    profile: Profile;\r\n}\r\n\r\nexport default observer(function ProfileBody({profile} : Props) {\r\n    const { profileStore } = useStore();\r\n\r\n    const panes = [\r\n        { menuItem: 'About', render: () => <ProfileAbout /> },\r\n        { menuItem: 'Photos', render: () => <ProfilePhotos profile={ profile } /> },\r\n        { menuItem: 'Events', render: () => <ProfileActivities /> },\r\n        { menuItem: 'Followers', render: () => <ProfileFollowings /> },\r\n        { menuItem: 'Following', render: () => <ProfileFollowings /> }\r\n    ]    \r\n\r\n    return (\r\n        <Tab\r\n            menu={ {fluid: true, vertical: true} }\r\n            menuPosition='right'\r\n            panes={ panes }\r\n            onTabChange={ (mouseEvent, tabProps) => profileStore.setActiveTab(tabProps.activeIndex) }\r\n        />\r\n    )\r\n})","import { observer } from \"mobx-react-lite\";\r\nimport { Divider, Grid, Header, Item, Segment, Statistic } from \"semantic-ui-react\";\r\nimport { Profile } from \"../../app/models/profile\";\r\nimport FollowButton from \"./FollowButton\";\r\n\r\ninterface Props {\r\n    profile: Profile;\r\n}\r\n\r\nexport default observer(function ProfileHeader({ profile } : Props) {\r\n    return (\r\n        <Segment>\r\n            <Grid>\r\n                <Grid.Column width='12'>\r\n                    <Item.Group>\r\n                        <Item>\r\n                            <Item.Image avatar size='small' src={ profile?.image || '/assets/user.png'} />\r\n                            <Item.Content verticalAlign='middle'>\r\n                                <Header as='h1' content={ profile?.displayName } />\r\n                            </Item.Content>\r\n                        </Item>\r\n                    </Item.Group>\r\n                </Grid.Column>\r\n                <Grid.Column width='4'>\r\n                    <Statistic.Group widths='2'>\r\n                        <Statistic label='Followers' value={ profile.followersCount } />\r\n                        <Statistic label='Following' value={ profile.followingCount } />\r\n                    </Statistic.Group>\r\n                    <Divider />\r\n                    <FollowButton profile={ profile } />\r\n                </Grid.Column>\r\n            </Grid>\r\n        </Segment>\r\n    )\r\n})","import { observer } from \"mobx-react-lite\";\r\nimport { useEffect } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport { Grid } from \"semantic-ui-react\";\r\nimport LoadingComponent from \"../../app/layout/LoadingComponent\";\r\nimport { useStore } from \"../../app/stores/store\";\r\nimport ProfileBody from \"./ProfileBody\";\r\nimport ProfileHeader from \"./ProfileHeader\";\r\n\r\nexport default observer(function ProfilePage() {\r\n    const { username } = useParams<{ username: string }>();\r\n    const { profileStore } = useStore();\r\n    // const { profile } = profileStore;\r\n\r\n    useEffect(() => {\r\n        profileStore.load(username);\r\n        return () => {\r\n            profileStore.setActiveTab(0);\r\n        }\r\n    }, [profileStore, username])\r\n\r\n    if (profileStore.loading) return <LoadingComponent content='Loading Profile...' />\r\n\r\n    return (\r\n        <Grid>\r\n            <Grid.Column width='16'>\r\n                {\r\n                    profileStore.profile && (\r\n                        <>\r\n                            <ProfileHeader profile={ profileStore.profile } />\r\n                            <ProfileBody profile={ profileStore.profile } />\r\n                        </>\r\n                )}\r\n            </Grid.Column>\r\n        </Grid>\r\n    )\r\n})","import { Redirect, Route, RouteComponentProps, RouteProps } from \"react-router\";\r\nimport { useStore } from \"../stores/store\";\r\n\r\ninterface Props extends RouteProps {\r\n    component: React.ComponentType<RouteComponentProps<any>> | React.ComponentType<any>;\r\n}\r\n\r\nexport default function PrivateRoute({ component: Component, ...routeProps }: Props) {\r\n    const { userStore: { isLoggedIn } } = useStore();\r\n\r\n    return (\r\n        <Route\r\n            { ...routeProps }\r\n            render={ (routeComponentProps) => isLoggedIn ? <Component { ...routeComponentProps } /> : <Redirect to='/' /> }\r\n        />\r\n    )\r\n}","import { Container } from 'semantic-ui-react';\nimport NavBar from './NavBar';\nimport ActivityDashboard from '../../features/activities/dashboard/ActivityDashboard';\nimport { observer } from 'mobx-react-lite';\nimport HomePage from '../../features/home/HomePage';\nimport ActivityForm from '../../features/activities/form/ActivityForm';\nimport ActivityDetails from '../../features/activities/details/ActivityDetails';\nimport { Route, Switch, useLocation } from 'react-router-dom';\nimport TestErrors from '../../features/errors/TestError';\nimport { ToastContainer } from 'react-toastify';\nimport NotFound from '../../features/errors/NotFound';\nimport ServerError from '../../features/errors/ServerError';\nimport { useStore } from '../stores/store';\nimport { useEffect } from 'react';\nimport LoadingComponent from './LoadingComponent';\nimport ModalContainer from '../common/modals/ModalContainer';\nimport ProfilePage from '../../features/profiles/ProfilePage';\nimport PrivateRoute from './PrivateRoute';\n\nfunction App() {\n  const location = useLocation();\n  const { commonStore, userStore } = useStore();\n\n  useEffect(() => {\n    if (commonStore.token) {\n      userStore.getUser().finally(() => commonStore.setAppLoaded());\n    } else {\n      commonStore.setAppLoaded();\n    }\n  }, [commonStore, userStore])\n\n\n  if (!commonStore.appLoaded) return <LoadingComponent content='Loading sample app...' />\n\n  return (\n    <>\n      <ToastContainer position='bottom-right' hideProgressBar />\n      <ModalContainer />\n      <Route exact path='/' component={ HomePage } />\n      <Route\n        path={ '/(.+)' }\n        render={ () => (\n          <>\n            <NavBar />\n            <Container style={{ marginTop: '7em' }}>\n              <Switch>\n                <PrivateRoute exact path='/activities' component={ ActivityDashboard } />\n                <PrivateRoute path='/activities/:id' component={ ActivityDetails } />\n                <PrivateRoute key={ location.key } path={ ['/createActivity', '/edit/:id'] } component={ ActivityForm } />\n                <PrivateRoute path='/profiles/:username' component={ ProfilePage } />\n                <PrivateRoute path='/errors' component={ TestErrors } />\n                <Route path='/server-error' component={ ServerError } />\n                {/* <Route path='/login' component={ LoginForm } /> */}\n                <Route component={ NotFound } />\n                {/* <Route component={ HomePage } /> */}\n              </Switch>\n            </Container>\n          </>\n        )}\n      />\n    </>\n  );\n}\n\nexport default observer(App);","import { useEffect } from \"react\";\r\nimport { useLocation } from \"react-router\";\r\n\r\nexport default function ScrollToTop() {\r\n    const { pathname } = useLocation();\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n    }, [pathname])\r\n\r\n    return null;\r\n}","import ReactDOM from 'react-dom';\nimport 'semantic-ui-css/semantic.min.css';\nimport 'react-calendar/dist/Calendar.css'\nimport 'react-toastify/dist/ReactToastify.min.css'\nimport 'react-datepicker/dist/react-datepicker.css'\nimport './app/layout/index.css';\nimport App from './app/layout/App';\nimport { store, StoreContext } from './app/stores/store';\nimport { Router } from 'react-router-dom';\nimport { createBrowserHistory } from 'history';\nimport ScrollToTop from './app/layout/ScrollToTop';\n\nexport const history = createBrowserHistory();\n\nReactDOM.render(\n  <StoreContext.Provider value={ store }>\n    <Router history={ history }>\n      <ScrollToTop />\n      <App />\n    </Router>\n  </StoreContext.Provider>,\n  document.getElementById('root')\n);"],"sourceRoot":""}